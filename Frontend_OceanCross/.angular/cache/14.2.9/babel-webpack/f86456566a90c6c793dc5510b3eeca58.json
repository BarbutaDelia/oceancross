{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _asyncToGenerator = require(\"/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCommonConfig = void 0;\n\nconst webpack_1 = require(\"@ngtools/webpack\");\n\nconst copy_webpack_plugin_1 = __importDefault(require(\"copy-webpack-plugin\"));\n\nconst path = __importStar(require(\"path\"));\n\nconst typescript_1 = require(\"typescript\");\n\nconst webpack_2 = require(\"webpack\");\n\nconst webpack_subresource_integrity_1 = require(\"webpack-subresource-integrity\");\n\nconst environment_options_1 = require(\"../../utils/environment-options\");\n\nconst load_esm_1 = require(\"../../utils/load-esm\");\n\nconst plugins_1 = require(\"../plugins\");\n\nconst devtools_ignore_plugin_1 = require(\"../plugins/devtools-ignore-plugin\");\n\nconst named_chunks_plugin_1 = require(\"../plugins/named-chunks-plugin\");\n\nconst progress_plugin_1 = require(\"../plugins/progress-plugin\");\n\nconst transfer_size_plugin_1 = require(\"../plugins/transfer-size-plugin\");\n\nconst typescript_2 = require(\"../plugins/typescript\");\n\nconst watch_files_logs_plugin_1 = require(\"../plugins/watch-files-logs-plugin\");\n\nconst helpers_1 = require(\"../utils/helpers\");\n\nconst VENDORS_TEST = /[\\\\/]node_modules[\\\\/]/; // eslint-disable-next-line max-lines-per-function\n\nfunction getCommonConfig(_x) {\n  return _getCommonConfig.apply(this, arguments);\n}\n\nfunction _getCommonConfig() {\n  _getCommonConfig = _asyncToGenerator(function* (wco) {\n    var _a, _b;\n\n    const {\n      root,\n      projectRoot,\n      buildOptions,\n      tsConfig,\n      projectName,\n      sourceRoot,\n      tsConfigPath,\n      scriptTarget\n    } = wco;\n    const {\n      cache,\n      codeCoverage,\n      crossOrigin = 'none',\n      platform = 'browser',\n      aot = true,\n      codeCoverageExclude = [],\n      main,\n      polyfills,\n      sourceMap: {\n        styles: stylesSourceMap,\n        scripts: scriptsSourceMap,\n        vendor: vendorSourceMap,\n        hidden: hiddenSourceMap\n      },\n      optimization: {\n        styles: stylesOptimization,\n        scripts: scriptsOptimization\n      },\n      commonChunk,\n      vendorChunk,\n      subresourceIntegrity,\n      verbose,\n      poll,\n      webWorkerTsConfig,\n      externalDependencies = [],\n      allowedCommonJsDependencies,\n      bundleDependencies\n    } = buildOptions;\n    const isPlatformServer = buildOptions.platform === 'server';\n    const extraPlugins = [];\n    const extraRules = [];\n    const entryPoints = {}; // Load ESM `@angular/compiler-cli` using the TypeScript dynamic import workaround.\n    // Once TypeScript provides support for keeping the dynamic import this workaround can be\n    // changed to a direct dynamic import.\n\n    const {\n      GLOBAL_DEFS_FOR_TERSER,\n      GLOBAL_DEFS_FOR_TERSER_WITH_AOT,\n      VERSION: NG_VERSION\n    } = yield (0, load_esm_1.loadEsmModule)('@angular/compiler-cli'); // determine hashing format\n\n    const hashFormat = (0, helpers_1.getOutputHashFormat)(buildOptions.outputHashing);\n\n    if (buildOptions.progress) {\n      extraPlugins.push(new progress_plugin_1.ProgressPlugin(platform));\n    }\n\n    if (buildOptions.main) {\n      const mainPath = path.resolve(root, buildOptions.main);\n      entryPoints['main'] = [mainPath];\n    }\n\n    if (isPlatformServer) {\n      // Fixes Critical dependency: the request of a dependency is an expression\n      extraPlugins.push(new webpack_2.ContextReplacementPlugin(/@?hapi|express[\\\\/]/));\n    }\n\n    if (!isPlatformServer) {\n      if (buildOptions.polyfills) {\n        const projectPolyfills = path.resolve(root, buildOptions.polyfills);\n\n        if (entryPoints['polyfills']) {\n          entryPoints['polyfills'].push(projectPolyfills);\n        } else {\n          entryPoints['polyfills'] = [projectPolyfills];\n        }\n      }\n    }\n\n    if (allowedCommonJsDependencies) {\n      // When this is not defined it means the builder doesn't support showing common js usages.\n      // When it does it will be an array.\n      extraPlugins.push(new plugins_1.CommonJsUsageWarnPlugin({\n        allowedDependencies: allowedCommonJsDependencies\n      }));\n    } // process global scripts\n    // Add a new asset for each entry.\n\n\n    for (const {\n      bundleName,\n      inject,\n      paths\n    } of (0, helpers_1.globalScriptsByBundleName)(root, buildOptions.scripts)) {\n      // Lazy scripts don't get a hash, otherwise they can't be loaded by name.\n      const hash = inject ? hashFormat.script : '';\n      extraPlugins.push(new plugins_1.ScriptsWebpackPlugin({\n        name: bundleName,\n        sourceMap: scriptsSourceMap,\n        scripts: paths,\n        filename: `${path.basename(bundleName)}${hash}.js`,\n        basePath: projectRoot\n      }));\n    } // process asset entries\n\n\n    if (buildOptions.assets.length) {\n      extraPlugins.push(new copy_webpack_plugin_1.default({\n        patterns: (0, helpers_1.assetPatterns)(root, buildOptions.assets)\n      }));\n    }\n\n    if (buildOptions.extractLicenses) {\n      const LicenseWebpackPlugin = require('license-webpack-plugin').LicenseWebpackPlugin;\n\n      extraPlugins.push(new LicenseWebpackPlugin({\n        stats: {\n          warnings: false,\n          errors: false\n        },\n        perChunkOutput: false,\n        outputFilename: '3rdpartylicenses.txt',\n        skipChildCompilers: true\n      }));\n    }\n\n    if (scriptsSourceMap || stylesSourceMap) {\n      const include = [];\n\n      if (scriptsSourceMap) {\n        include.push(/js$/);\n      }\n\n      if (stylesSourceMap) {\n        include.push(/css$/);\n      }\n\n      extraPlugins.push(new devtools_ignore_plugin_1.DevToolsIgnorePlugin());\n      extraPlugins.push(new webpack_2.SourceMapDevToolPlugin({\n        filename: '[file].map',\n        include,\n        // We want to set sourceRoot to  `webpack:///` for non\n        // inline sourcemaps as otherwise paths to sourcemaps will be broken in browser\n        // `webpack:///` is needed for Visual Studio breakpoints to work properly as currently\n        // there is no way to set the 'webRoot'\n        sourceRoot: 'webpack:///',\n        moduleFilenameTemplate: '[resource-path]',\n        append: hiddenSourceMap ? false : undefined\n      }));\n    }\n\n    if (verbose) {\n      extraPlugins.push(new watch_files_logs_plugin_1.WatchFilesLogsPlugin());\n    }\n\n    if (buildOptions.statsJson) {\n      extraPlugins.push(new plugins_1.JsonStatsPlugin(path.resolve(root, buildOptions.outputPath, 'stats.json')));\n    }\n\n    if (subresourceIntegrity) {\n      extraPlugins.push(new webpack_subresource_integrity_1.SubresourceIntegrityPlugin({\n        hashFuncNames: ['sha384']\n      }));\n    }\n\n    if (scriptsSourceMap || stylesSourceMap) {\n      extraRules.push({\n        test: /\\.[cm]?jsx?$/,\n        enforce: 'pre',\n        loader: require.resolve('source-map-loader'),\n        options: {\n          filterSourceMappingUrl: (_mapUri, resourcePath) => {\n            if (vendorSourceMap) {\n              // Consume all sourcemaps when vendor option is enabled.\n              return true;\n            } // Don't consume sourcemaps in node_modules when vendor is disabled.\n            // But, do consume local libraries sourcemaps.\n\n\n            return !resourcePath.includes('node_modules');\n          }\n        }\n      });\n    }\n\n    if (main || polyfills) {\n      extraRules.push({\n        test: tsConfig.options.allowJs ? /\\.[cm]?[tj]sx?$/ : /\\.[cm]?tsx?$/,\n        loader: webpack_1.AngularWebpackLoaderPath,\n        // The below are known paths that are not part of the TypeScript compilation even when allowJs is enabled.\n        exclude: [/[\\\\/]node_modules[/\\\\](?:css-loader|mini-css-extract-plugin|webpack-dev-server|webpack)[/\\\\]/]\n      });\n      extraPlugins.push((0, typescript_2.createIvyPlugin)(wco, aot, tsConfigPath));\n    }\n\n    if (webWorkerTsConfig) {\n      extraPlugins.push((0, typescript_2.createIvyPlugin)(wco, false, path.resolve(wco.root, webWorkerTsConfig)));\n    }\n\n    const extraMinimizers = [];\n\n    if (scriptsOptimization) {\n      extraMinimizers.push(new plugins_1.JavaScriptOptimizerPlugin({\n        define: buildOptions.aot ? GLOBAL_DEFS_FOR_TERSER_WITH_AOT : GLOBAL_DEFS_FOR_TERSER,\n        sourcemap: scriptsSourceMap,\n        target: scriptTarget,\n        keepIdentifierNames: !environment_options_1.allowMangle || isPlatformServer,\n        keepNames: isPlatformServer,\n        removeLicenses: buildOptions.extractLicenses,\n        advanced: buildOptions.buildOptimizer\n      }));\n    }\n\n    if (platform === 'browser' && (scriptsOptimization || stylesOptimization.minify)) {\n      extraMinimizers.push(new transfer_size_plugin_1.TransferSizePlugin());\n    }\n\n    const externals = [...externalDependencies];\n\n    if (isPlatformServer && !bundleDependencies) {\n      externals.push(({\n        context,\n        request\n      }, callback) => (0, helpers_1.externalizePackages)(context !== null && context !== void 0 ? context : wco.projectRoot, request, callback));\n    }\n\n    let crossOriginLoading = false;\n\n    if (subresourceIntegrity && crossOrigin === 'none') {\n      crossOriginLoading = 'anonymous';\n    } else if (crossOrigin !== 'none') {\n      crossOriginLoading = crossOrigin;\n    }\n\n    return {\n      mode: scriptsOptimization || stylesOptimization.minify ? 'production' : 'development',\n      devtool: false,\n      target: [isPlatformServer ? 'node' : 'web', scriptTarget === typescript_1.ScriptTarget.ES5 ? 'es5' : 'es2015'],\n      profile: buildOptions.statsJson,\n      resolve: {\n        roots: [projectRoot],\n        extensions: ['.ts', '.tsx', '.mjs', '.js'],\n        symlinks: !buildOptions.preserveSymlinks,\n        modules: [tsConfig.options.baseUrl || projectRoot, 'node_modules'],\n        ...(0, helpers_1.getMainFieldsAndConditionNames)(scriptTarget, isPlatformServer)\n      },\n      resolveLoader: {\n        symlinks: !buildOptions.preserveSymlinks\n      },\n      context: root,\n      entry: entryPoints,\n      externals,\n      output: {\n        uniqueName: projectName,\n        hashFunction: 'xxhash64',\n        clean: (_a = buildOptions.deleteOutputPath) !== null && _a !== void 0 ? _a : true,\n        path: path.resolve(root, buildOptions.outputPath),\n        publicPath: (_b = buildOptions.deployUrl) !== null && _b !== void 0 ? _b : '',\n        filename: `[name]${hashFormat.chunk}.js`,\n        chunkFilename: `[name]${hashFormat.chunk}.js`,\n        libraryTarget: isPlatformServer ? 'commonjs' : undefined,\n        crossOriginLoading,\n        trustedTypes: 'angular#bundler',\n        scriptType: 'module'\n      },\n      watch: buildOptions.watch,\n      watchOptions: {\n        poll,\n        // The below is needed as when preserveSymlinks is enabled we disable `resolve.symlinks`.\n        followSymlinks: buildOptions.preserveSymlinks,\n        ignored: poll === undefined ? undefined : '**/node_modules/**'\n      },\n      snapshot: {\n        module: {\n          // Use hash of content instead of timestamp because the timestamp of the symlink will be used\n          // instead of the referenced files which causes changes in symlinks not to be picked up.\n          hash: buildOptions.preserveSymlinks\n        }\n      },\n      performance: {\n        hints: false\n      },\n      ignoreWarnings: [// https://github.com/webpack-contrib/source-map-loader/blob/b2de4249c7431dd8432da607e08f0f65e9d64219/src/index.js#L83\n      /Failed to parse source map from/, // https://github.com/webpack-contrib/postcss-loader/blob/bd261875fdf9c596af4ffb3a1a73fe3c549befda/src/index.js#L153-L158\n      /Add postcss as project dependency/, // esbuild will issue a warning, while still hoists the @charset at the very top.\n      // This is caused by a bug in css-loader https://github.com/webpack-contrib/css-loader/issues/1212\n      /\"@charset\" must be the first rule in the file/],\n      module: {\n        // Show an error for missing exports instead of a warning.\n        strictExportPresence: true,\n        parser: {\n          javascript: {\n            // Disable auto URL asset module creation. This doesn't effect `new Worker(new URL(...))`\n            // https://webpack.js.org/guides/asset-modules/#url-assets\n            url: false,\n            worker: !!webWorkerTsConfig\n          }\n        },\n        rules: [{\n          test: /\\.?(svg|html)$/,\n          // Only process HTML and SVG which are known Angular component resources.\n          resourceQuery: /\\?ngResource/,\n          type: 'asset/source'\n        }, {\n          // Mark files inside `rxjs/add` as containing side effects.\n          // If this is fixed upstream and the fixed version becomes the minimum\n          // supported version, this can be removed.\n          test: /[/\\\\]rxjs[/\\\\]add[/\\\\].+\\.js$/,\n          sideEffects: true\n        }, {\n          test: /\\.[cm]?[tj]sx?$/,\n          // The below is needed due to a bug in `@babel/runtime`. See: https://github.com/babel/babel/issues/12824\n          resolve: {\n            fullySpecified: false\n          },\n          exclude: [/[\\\\/]node_modules[/\\\\](?:core-js|@babel|tslib|web-animations-js|web-streams-polyfill|whatwg-url)[/\\\\]/],\n          use: [{\n            loader: require.resolve('../../babel/webpack-loader'),\n            options: {\n              cacheDirectory: cache.enabled && path.join(cache.path, 'babel-webpack') || false,\n              scriptTarget,\n              aot: buildOptions.aot,\n              optimize: buildOptions.buildOptimizer,\n              supportedBrowsers: buildOptions.supportedBrowsers,\n              instrumentCode: codeCoverage ? {\n                includedBasePath: sourceRoot !== null && sourceRoot !== void 0 ? sourceRoot : projectRoot,\n                excludedPaths: (0, helpers_1.getInstrumentationExcludedPaths)(root, codeCoverageExclude)\n              } : undefined\n            }\n          }]\n        }, ...extraRules]\n      },\n      experiments: {\n        backCompat: false,\n        syncWebAssembly: true,\n        asyncWebAssembly: true\n      },\n      infrastructureLogging: {\n        debug: verbose,\n        level: verbose ? 'verbose' : 'error'\n      },\n      stats: (0, helpers_1.getStatsOptions)(verbose),\n      cache: (0, helpers_1.getCacheSettings)(wco, NG_VERSION.full),\n      optimization: {\n        minimizer: extraMinimizers,\n        moduleIds: 'deterministic',\n        chunkIds: buildOptions.namedChunks ? 'named' : 'deterministic',\n        emitOnErrors: false,\n        runtimeChunk: isPlatformServer ? false : 'single',\n        splitChunks: {\n          maxAsyncRequests: Infinity,\n          cacheGroups: {\n            default: !!commonChunk && {\n              chunks: 'async',\n              minChunks: 2,\n              priority: 10\n            },\n            common: !!commonChunk && {\n              name: 'common',\n              chunks: 'async',\n              minChunks: 2,\n              enforce: true,\n              priority: 5\n            },\n            vendors: false,\n            defaultVendors: !!vendorChunk && {\n              name: 'vendor',\n              chunks: chunk => chunk.name === 'main',\n              enforce: true,\n              test: VENDORS_TEST\n            }\n          }\n        }\n      },\n      plugins: [new named_chunks_plugin_1.NamedChunksPlugin(), new plugins_1.DedupeModuleResolvePlugin({\n        verbose\n      }), ...extraPlugins],\n      node: false\n    };\n  });\n  return _getCommonConfig.apply(this, arguments);\n}\n\nexports.getCommonConfig = getCommonConfig;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","exports","getCommonConfig","webpack_1","require","copy_webpack_plugin_1","path","typescript_1","webpack_2","webpack_subresource_integrity_1","environment_options_1","load_esm_1","plugins_1","devtools_ignore_plugin_1","named_chunks_plugin_1","progress_plugin_1","transfer_size_plugin_1","typescript_2","watch_files_logs_plugin_1","helpers_1","VENDORS_TEST","wco","_a","_b","root","projectRoot","buildOptions","tsConfig","projectName","sourceRoot","tsConfigPath","scriptTarget","cache","codeCoverage","crossOrigin","platform","aot","codeCoverageExclude","main","polyfills","sourceMap","styles","stylesSourceMap","scripts","scriptsSourceMap","vendor","vendorSourceMap","hidden","hiddenSourceMap","optimization","stylesOptimization","scriptsOptimization","commonChunk","vendorChunk","subresourceIntegrity","verbose","poll","webWorkerTsConfig","externalDependencies","allowedCommonJsDependencies","bundleDependencies","isPlatformServer","extraPlugins","extraRules","entryPoints","GLOBAL_DEFS_FOR_TERSER","GLOBAL_DEFS_FOR_TERSER_WITH_AOT","VERSION","NG_VERSION","loadEsmModule","hashFormat","getOutputHashFormat","outputHashing","progress","push","ProgressPlugin","mainPath","resolve","ContextReplacementPlugin","projectPolyfills","CommonJsUsageWarnPlugin","allowedDependencies","bundleName","inject","paths","globalScriptsByBundleName","hash","script","ScriptsWebpackPlugin","name","filename","basename","basePath","assets","length","default","patterns","assetPatterns","extractLicenses","LicenseWebpackPlugin","stats","warnings","errors","perChunkOutput","outputFilename","skipChildCompilers","include","DevToolsIgnorePlugin","SourceMapDevToolPlugin","moduleFilenameTemplate","append","WatchFilesLogsPlugin","statsJson","JsonStatsPlugin","outputPath","SubresourceIntegrityPlugin","hashFuncNames","test","enforce","loader","options","filterSourceMappingUrl","_mapUri","resourcePath","includes","allowJs","AngularWebpackLoaderPath","exclude","createIvyPlugin","extraMinimizers","JavaScriptOptimizerPlugin","define","sourcemap","target","keepIdentifierNames","allowMangle","keepNames","removeLicenses","advanced","buildOptimizer","minify","TransferSizePlugin","externals","context","request","callback","externalizePackages","crossOriginLoading","mode","devtool","ScriptTarget","ES5","profile","roots","extensions","symlinks","preserveSymlinks","modules","baseUrl","getMainFieldsAndConditionNames","resolveLoader","entry","output","uniqueName","hashFunction","clean","deleteOutputPath","publicPath","deployUrl","chunk","chunkFilename","libraryTarget","trustedTypes","scriptType","watch","watchOptions","followSymlinks","ignored","snapshot","module","performance","hints","ignoreWarnings","strictExportPresence","parser","javascript","url","worker","rules","resourceQuery","type","sideEffects","fullySpecified","use","cacheDirectory","enabled","join","optimize","supportedBrowsers","instrumentCode","includedBasePath","excludedPaths","getInstrumentationExcludedPaths","experiments","backCompat","syncWebAssembly","asyncWebAssembly","infrastructureLogging","debug","level","getStatsOptions","getCacheSettings","full","minimizer","moduleIds","chunkIds","namedChunks","emitOnErrors","runtimeChunk","splitChunks","maxAsyncRequests","Infinity","cacheGroups","chunks","minChunks","priority","common","vendors","defaultVendors","plugins","NamedChunksPlugin","DedupeModuleResolvePlugin","node"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@angular-devkit/build-angular/src/webpack/configs/common.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCommonConfig = void 0;\nconst webpack_1 = require(\"@ngtools/webpack\");\nconst copy_webpack_plugin_1 = __importDefault(require(\"copy-webpack-plugin\"));\nconst path = __importStar(require(\"path\"));\nconst typescript_1 = require(\"typescript\");\nconst webpack_2 = require(\"webpack\");\nconst webpack_subresource_integrity_1 = require(\"webpack-subresource-integrity\");\nconst environment_options_1 = require(\"../../utils/environment-options\");\nconst load_esm_1 = require(\"../../utils/load-esm\");\nconst plugins_1 = require(\"../plugins\");\nconst devtools_ignore_plugin_1 = require(\"../plugins/devtools-ignore-plugin\");\nconst named_chunks_plugin_1 = require(\"../plugins/named-chunks-plugin\");\nconst progress_plugin_1 = require(\"../plugins/progress-plugin\");\nconst transfer_size_plugin_1 = require(\"../plugins/transfer-size-plugin\");\nconst typescript_2 = require(\"../plugins/typescript\");\nconst watch_files_logs_plugin_1 = require(\"../plugins/watch-files-logs-plugin\");\nconst helpers_1 = require(\"../utils/helpers\");\nconst VENDORS_TEST = /[\\\\/]node_modules[\\\\/]/;\n// eslint-disable-next-line max-lines-per-function\nasync function getCommonConfig(wco) {\n    var _a, _b;\n    const { root, projectRoot, buildOptions, tsConfig, projectName, sourceRoot, tsConfigPath, scriptTarget, } = wco;\n    const { cache, codeCoverage, crossOrigin = 'none', platform = 'browser', aot = true, codeCoverageExclude = [], main, polyfills, sourceMap: { styles: stylesSourceMap, scripts: scriptsSourceMap, vendor: vendorSourceMap, hidden: hiddenSourceMap, }, optimization: { styles: stylesOptimization, scripts: scriptsOptimization }, commonChunk, vendorChunk, subresourceIntegrity, verbose, poll, webWorkerTsConfig, externalDependencies = [], allowedCommonJsDependencies, bundleDependencies, } = buildOptions;\n    const isPlatformServer = buildOptions.platform === 'server';\n    const extraPlugins = [];\n    const extraRules = [];\n    const entryPoints = {};\n    // Load ESM `@angular/compiler-cli` using the TypeScript dynamic import workaround.\n    // Once TypeScript provides support for keeping the dynamic import this workaround can be\n    // changed to a direct dynamic import.\n    const { GLOBAL_DEFS_FOR_TERSER, GLOBAL_DEFS_FOR_TERSER_WITH_AOT, VERSION: NG_VERSION, } = await (0, load_esm_1.loadEsmModule)('@angular/compiler-cli');\n    // determine hashing format\n    const hashFormat = (0, helpers_1.getOutputHashFormat)(buildOptions.outputHashing);\n    if (buildOptions.progress) {\n        extraPlugins.push(new progress_plugin_1.ProgressPlugin(platform));\n    }\n    if (buildOptions.main) {\n        const mainPath = path.resolve(root, buildOptions.main);\n        entryPoints['main'] = [mainPath];\n    }\n    if (isPlatformServer) {\n        // Fixes Critical dependency: the request of a dependency is an expression\n        extraPlugins.push(new webpack_2.ContextReplacementPlugin(/@?hapi|express[\\\\/]/));\n    }\n    if (!isPlatformServer) {\n        if (buildOptions.polyfills) {\n            const projectPolyfills = path.resolve(root, buildOptions.polyfills);\n            if (entryPoints['polyfills']) {\n                entryPoints['polyfills'].push(projectPolyfills);\n            }\n            else {\n                entryPoints['polyfills'] = [projectPolyfills];\n            }\n        }\n    }\n    if (allowedCommonJsDependencies) {\n        // When this is not defined it means the builder doesn't support showing common js usages.\n        // When it does it will be an array.\n        extraPlugins.push(new plugins_1.CommonJsUsageWarnPlugin({\n            allowedDependencies: allowedCommonJsDependencies,\n        }));\n    }\n    // process global scripts\n    // Add a new asset for each entry.\n    for (const { bundleName, inject, paths } of (0, helpers_1.globalScriptsByBundleName)(root, buildOptions.scripts)) {\n        // Lazy scripts don't get a hash, otherwise they can't be loaded by name.\n        const hash = inject ? hashFormat.script : '';\n        extraPlugins.push(new plugins_1.ScriptsWebpackPlugin({\n            name: bundleName,\n            sourceMap: scriptsSourceMap,\n            scripts: paths,\n            filename: `${path.basename(bundleName)}${hash}.js`,\n            basePath: projectRoot,\n        }));\n    }\n    // process asset entries\n    if (buildOptions.assets.length) {\n        extraPlugins.push(new copy_webpack_plugin_1.default({\n            patterns: (0, helpers_1.assetPatterns)(root, buildOptions.assets),\n        }));\n    }\n    if (buildOptions.extractLicenses) {\n        const LicenseWebpackPlugin = require('license-webpack-plugin').LicenseWebpackPlugin;\n        extraPlugins.push(new LicenseWebpackPlugin({\n            stats: {\n                warnings: false,\n                errors: false,\n            },\n            perChunkOutput: false,\n            outputFilename: '3rdpartylicenses.txt',\n            skipChildCompilers: true,\n        }));\n    }\n    if (scriptsSourceMap || stylesSourceMap) {\n        const include = [];\n        if (scriptsSourceMap) {\n            include.push(/js$/);\n        }\n        if (stylesSourceMap) {\n            include.push(/css$/);\n        }\n        extraPlugins.push(new devtools_ignore_plugin_1.DevToolsIgnorePlugin());\n        extraPlugins.push(new webpack_2.SourceMapDevToolPlugin({\n            filename: '[file].map',\n            include,\n            // We want to set sourceRoot to  `webpack:///` for non\n            // inline sourcemaps as otherwise paths to sourcemaps will be broken in browser\n            // `webpack:///` is needed for Visual Studio breakpoints to work properly as currently\n            // there is no way to set the 'webRoot'\n            sourceRoot: 'webpack:///',\n            moduleFilenameTemplate: '[resource-path]',\n            append: hiddenSourceMap ? false : undefined,\n        }));\n    }\n    if (verbose) {\n        extraPlugins.push(new watch_files_logs_plugin_1.WatchFilesLogsPlugin());\n    }\n    if (buildOptions.statsJson) {\n        extraPlugins.push(new plugins_1.JsonStatsPlugin(path.resolve(root, buildOptions.outputPath, 'stats.json')));\n    }\n    if (subresourceIntegrity) {\n        extraPlugins.push(new webpack_subresource_integrity_1.SubresourceIntegrityPlugin({\n            hashFuncNames: ['sha384'],\n        }));\n    }\n    if (scriptsSourceMap || stylesSourceMap) {\n        extraRules.push({\n            test: /\\.[cm]?jsx?$/,\n            enforce: 'pre',\n            loader: require.resolve('source-map-loader'),\n            options: {\n                filterSourceMappingUrl: (_mapUri, resourcePath) => {\n                    if (vendorSourceMap) {\n                        // Consume all sourcemaps when vendor option is enabled.\n                        return true;\n                    }\n                    // Don't consume sourcemaps in node_modules when vendor is disabled.\n                    // But, do consume local libraries sourcemaps.\n                    return !resourcePath.includes('node_modules');\n                },\n            },\n        });\n    }\n    if (main || polyfills) {\n        extraRules.push({\n            test: tsConfig.options.allowJs ? /\\.[cm]?[tj]sx?$/ : /\\.[cm]?tsx?$/,\n            loader: webpack_1.AngularWebpackLoaderPath,\n            // The below are known paths that are not part of the TypeScript compilation even when allowJs is enabled.\n            exclude: [\n                /[\\\\/]node_modules[/\\\\](?:css-loader|mini-css-extract-plugin|webpack-dev-server|webpack)[/\\\\]/,\n            ],\n        });\n        extraPlugins.push((0, typescript_2.createIvyPlugin)(wco, aot, tsConfigPath));\n    }\n    if (webWorkerTsConfig) {\n        extraPlugins.push((0, typescript_2.createIvyPlugin)(wco, false, path.resolve(wco.root, webWorkerTsConfig)));\n    }\n    const extraMinimizers = [];\n    if (scriptsOptimization) {\n        extraMinimizers.push(new plugins_1.JavaScriptOptimizerPlugin({\n            define: buildOptions.aot ? GLOBAL_DEFS_FOR_TERSER_WITH_AOT : GLOBAL_DEFS_FOR_TERSER,\n            sourcemap: scriptsSourceMap,\n            target: scriptTarget,\n            keepIdentifierNames: !environment_options_1.allowMangle || isPlatformServer,\n            keepNames: isPlatformServer,\n            removeLicenses: buildOptions.extractLicenses,\n            advanced: buildOptions.buildOptimizer,\n        }));\n    }\n    if (platform === 'browser' && (scriptsOptimization || stylesOptimization.minify)) {\n        extraMinimizers.push(new transfer_size_plugin_1.TransferSizePlugin());\n    }\n    const externals = [...externalDependencies];\n    if (isPlatformServer && !bundleDependencies) {\n        externals.push(({ context, request }, callback) => (0, helpers_1.externalizePackages)(context !== null && context !== void 0 ? context : wco.projectRoot, request, callback));\n    }\n    let crossOriginLoading = false;\n    if (subresourceIntegrity && crossOrigin === 'none') {\n        crossOriginLoading = 'anonymous';\n    }\n    else if (crossOrigin !== 'none') {\n        crossOriginLoading = crossOrigin;\n    }\n    return {\n        mode: scriptsOptimization || stylesOptimization.minify ? 'production' : 'development',\n        devtool: false,\n        target: [\n            isPlatformServer ? 'node' : 'web',\n            scriptTarget === typescript_1.ScriptTarget.ES5 ? 'es5' : 'es2015',\n        ],\n        profile: buildOptions.statsJson,\n        resolve: {\n            roots: [projectRoot],\n            extensions: ['.ts', '.tsx', '.mjs', '.js'],\n            symlinks: !buildOptions.preserveSymlinks,\n            modules: [tsConfig.options.baseUrl || projectRoot, 'node_modules'],\n            ...(0, helpers_1.getMainFieldsAndConditionNames)(scriptTarget, isPlatformServer),\n        },\n        resolveLoader: {\n            symlinks: !buildOptions.preserveSymlinks,\n        },\n        context: root,\n        entry: entryPoints,\n        externals,\n        output: {\n            uniqueName: projectName,\n            hashFunction: 'xxhash64',\n            clean: (_a = buildOptions.deleteOutputPath) !== null && _a !== void 0 ? _a : true,\n            path: path.resolve(root, buildOptions.outputPath),\n            publicPath: (_b = buildOptions.deployUrl) !== null && _b !== void 0 ? _b : '',\n            filename: `[name]${hashFormat.chunk}.js`,\n            chunkFilename: `[name]${hashFormat.chunk}.js`,\n            libraryTarget: isPlatformServer ? 'commonjs' : undefined,\n            crossOriginLoading,\n            trustedTypes: 'angular#bundler',\n            scriptType: 'module',\n        },\n        watch: buildOptions.watch,\n        watchOptions: {\n            poll,\n            // The below is needed as when preserveSymlinks is enabled we disable `resolve.symlinks`.\n            followSymlinks: buildOptions.preserveSymlinks,\n            ignored: poll === undefined ? undefined : '**/node_modules/**',\n        },\n        snapshot: {\n            module: {\n                // Use hash of content instead of timestamp because the timestamp of the symlink will be used\n                // instead of the referenced files which causes changes in symlinks not to be picked up.\n                hash: buildOptions.preserveSymlinks,\n            },\n        },\n        performance: {\n            hints: false,\n        },\n        ignoreWarnings: [\n            // https://github.com/webpack-contrib/source-map-loader/blob/b2de4249c7431dd8432da607e08f0f65e9d64219/src/index.js#L83\n            /Failed to parse source map from/,\n            // https://github.com/webpack-contrib/postcss-loader/blob/bd261875fdf9c596af4ffb3a1a73fe3c549befda/src/index.js#L153-L158\n            /Add postcss as project dependency/,\n            // esbuild will issue a warning, while still hoists the @charset at the very top.\n            // This is caused by a bug in css-loader https://github.com/webpack-contrib/css-loader/issues/1212\n            /\"@charset\" must be the first rule in the file/,\n        ],\n        module: {\n            // Show an error for missing exports instead of a warning.\n            strictExportPresence: true,\n            parser: {\n                javascript: {\n                    // Disable auto URL asset module creation. This doesn't effect `new Worker(new URL(...))`\n                    // https://webpack.js.org/guides/asset-modules/#url-assets\n                    url: false,\n                    worker: !!webWorkerTsConfig,\n                },\n            },\n            rules: [\n                {\n                    test: /\\.?(svg|html)$/,\n                    // Only process HTML and SVG which are known Angular component resources.\n                    resourceQuery: /\\?ngResource/,\n                    type: 'asset/source',\n                },\n                {\n                    // Mark files inside `rxjs/add` as containing side effects.\n                    // If this is fixed upstream and the fixed version becomes the minimum\n                    // supported version, this can be removed.\n                    test: /[/\\\\]rxjs[/\\\\]add[/\\\\].+\\.js$/,\n                    sideEffects: true,\n                },\n                {\n                    test: /\\.[cm]?[tj]sx?$/,\n                    // The below is needed due to a bug in `@babel/runtime`. See: https://github.com/babel/babel/issues/12824\n                    resolve: { fullySpecified: false },\n                    exclude: [\n                        /[\\\\/]node_modules[/\\\\](?:core-js|@babel|tslib|web-animations-js|web-streams-polyfill|whatwg-url)[/\\\\]/,\n                    ],\n                    use: [\n                        {\n                            loader: require.resolve('../../babel/webpack-loader'),\n                            options: {\n                                cacheDirectory: (cache.enabled && path.join(cache.path, 'babel-webpack')) || false,\n                                scriptTarget,\n                                aot: buildOptions.aot,\n                                optimize: buildOptions.buildOptimizer,\n                                supportedBrowsers: buildOptions.supportedBrowsers,\n                                instrumentCode: codeCoverage\n                                    ? {\n                                        includedBasePath: sourceRoot !== null && sourceRoot !== void 0 ? sourceRoot : projectRoot,\n                                        excludedPaths: (0, helpers_1.getInstrumentationExcludedPaths)(root, codeCoverageExclude),\n                                    }\n                                    : undefined,\n                            },\n                        },\n                    ],\n                },\n                ...extraRules,\n            ],\n        },\n        experiments: {\n            backCompat: false,\n            syncWebAssembly: true,\n            asyncWebAssembly: true,\n        },\n        infrastructureLogging: {\n            debug: verbose,\n            level: verbose ? 'verbose' : 'error',\n        },\n        stats: (0, helpers_1.getStatsOptions)(verbose),\n        cache: (0, helpers_1.getCacheSettings)(wco, NG_VERSION.full),\n        optimization: {\n            minimizer: extraMinimizers,\n            moduleIds: 'deterministic',\n            chunkIds: buildOptions.namedChunks ? 'named' : 'deterministic',\n            emitOnErrors: false,\n            runtimeChunk: isPlatformServer ? false : 'single',\n            splitChunks: {\n                maxAsyncRequests: Infinity,\n                cacheGroups: {\n                    default: !!commonChunk && {\n                        chunks: 'async',\n                        minChunks: 2,\n                        priority: 10,\n                    },\n                    common: !!commonChunk && {\n                        name: 'common',\n                        chunks: 'async',\n                        minChunks: 2,\n                        enforce: true,\n                        priority: 5,\n                    },\n                    vendors: false,\n                    defaultVendors: !!vendorChunk && {\n                        name: 'vendor',\n                        chunks: (chunk) => chunk.name === 'main',\n                        enforce: true,\n                        test: VENDORS_TEST,\n                    },\n                },\n            },\n        },\n        plugins: [new named_chunks_plugin_1.NamedChunksPlugin(), new plugins_1.DedupeModuleResolvePlugin({ verbose }), ...extraPlugins],\n        node: false,\n    };\n}\nexports.getCommonConfig = getCommonConfig;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}