{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PluginChunkReadHandler = void 0;\n\nvar WebpackChunkModuleIterator_1 = require(\"./WebpackChunkModuleIterator\");\n\nvar WebpackInnerModuleIterator_1 = require(\"./WebpackInnerModuleIterator\");\n\nvar PluginChunkReadHandler =\n/** @class */\nfunction () {\n  function PluginChunkReadHandler(logger, fileHandler, licenseTypeIdentifier, licenseTextReader, licensePolicy, fileSystem) {\n    this.logger = logger;\n    this.fileHandler = fileHandler;\n    this.licenseTypeIdentifier = licenseTypeIdentifier;\n    this.licenseTextReader = licenseTextReader;\n    this.licensePolicy = licensePolicy;\n    this.fileSystem = fileSystem;\n    this.moduleIterator = new WebpackChunkModuleIterator_1.WebpackChunkModuleIterator();\n    this.innerModuleIterator = new WebpackInnerModuleIterator_1.WebpackInnerModuleIterator(require.resolve);\n  }\n\n  PluginChunkReadHandler.prototype.processChunk = function (compilation, chunk, moduleCache, stats) {\n    var _this = this;\n\n    this.moduleIterator.iterateModules(compilation, chunk, stats, function (chunkModule) {\n      _this.innerModuleIterator.iterateModules(chunkModule, function (module) {\n        var identifiedModule = _this.extractIdentifiedModule(module) || _this.fileHandler.getModule(module.resource);\n\n        if (identifiedModule) {\n          _this.processModule(compilation, chunk, moduleCache, identifiedModule);\n        }\n      });\n    });\n  };\n\n  PluginChunkReadHandler.prototype.extractIdentifiedModule = function (module) {\n    var resolved = module.resourceResolveData;\n    if (!resolved) return undefined;\n    var directory = resolved.descriptionFileRoot,\n        packageJson = resolved.descriptionFileData;\n\n    if ( // if missing data, fall back to fs module hunting\n    directory && packageJson && packageJson.name && // user checks to decide if we should include the module\n    this.fileHandler.isInModuleDirectory(directory) && !this.fileHandler.isBuildRoot(directory) && !this.fileHandler.excludedPackageTest(packageJson.name)) {\n      return {\n        directory: directory,\n        packageJson: packageJson,\n        name: packageJson.name\n      };\n    }\n\n    return undefined;\n  };\n\n  PluginChunkReadHandler.prototype.getPackageJson = function (directory) {\n    var filename = \"\" + directory + this.fileSystem.pathSeparator + \"package.json\";\n    return JSON.parse(this.fileSystem.readFileAsUtf8(filename));\n  };\n\n  PluginChunkReadHandler.prototype.processModule = function (compilation, chunk, moduleCache, module) {\n    var _a;\n\n    if (!moduleCache.alreadySeenForChunk(chunk.name, module.name)) {\n      var alreadyIncludedModule = moduleCache.getModule(module.name);\n\n      if (alreadyIncludedModule !== null) {\n        moduleCache.registerModule(chunk.name, alreadyIncludedModule);\n      } else {\n        // module not yet in cache\n        var packageJson = (_a = module.packageJson) !== null && _a !== void 0 ? _a : this.getPackageJson(module.directory);\n        var licenseType = this.licenseTypeIdentifier.findLicenseIdentifier(compilation, module.name, packageJson);\n\n        if (this.licensePolicy.isLicenseUnacceptableFor(licenseType)) {\n          this.logger.error(compilation, \"unacceptable license found for \" + module.name + \": \" + licenseType);\n          this.licensePolicy.handleUnacceptableLicense(module.name, licenseType);\n        }\n\n        if (this.licensePolicy.isLicenseWrittenFor(licenseType)) {\n          var licenseText = this.licenseTextReader.readLicense(compilation, module, licenseType);\n          moduleCache.registerModule(chunk.name, {\n            licenseText: licenseText,\n            packageJson: packageJson,\n            name: module.name,\n            directory: module.directory,\n            licenseId: licenseType\n          });\n        }\n      }\n\n      moduleCache.markSeenForChunk(chunk.name, module.name);\n    }\n  };\n\n  return PluginChunkReadHandler;\n}();\n\nexports.PluginChunkReadHandler = PluginChunkReadHandler;","map":{"version":3,"names":["Object","defineProperty","exports","value","PluginChunkReadHandler","WebpackChunkModuleIterator_1","require","WebpackInnerModuleIterator_1","logger","fileHandler","licenseTypeIdentifier","licenseTextReader","licensePolicy","fileSystem","moduleIterator","WebpackChunkModuleIterator","innerModuleIterator","WebpackInnerModuleIterator","resolve","prototype","processChunk","compilation","chunk","moduleCache","stats","_this","iterateModules","chunkModule","module","identifiedModule","extractIdentifiedModule","getModule","resource","processModule","resolved","resourceResolveData","undefined","directory","descriptionFileRoot","packageJson","descriptionFileData","name","isInModuleDirectory","isBuildRoot","excludedPackageTest","getPackageJson","filename","pathSeparator","JSON","parse","readFileAsUtf8","_a","alreadySeenForChunk","alreadyIncludedModule","registerModule","licenseType","findLicenseIdentifier","isLicenseUnacceptableFor","error","handleUnacceptableLicense","isLicenseWrittenFor","licenseText","readLicense","licenseId","markSeenForChunk"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/license-webpack-plugin/dist/PluginChunkReadHandler.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PluginChunkReadHandler = void 0;\nvar WebpackChunkModuleIterator_1 = require(\"./WebpackChunkModuleIterator\");\nvar WebpackInnerModuleIterator_1 = require(\"./WebpackInnerModuleIterator\");\nvar PluginChunkReadHandler = /** @class */ (function () {\n    function PluginChunkReadHandler(logger, fileHandler, licenseTypeIdentifier, licenseTextReader, licensePolicy, fileSystem) {\n        this.logger = logger;\n        this.fileHandler = fileHandler;\n        this.licenseTypeIdentifier = licenseTypeIdentifier;\n        this.licenseTextReader = licenseTextReader;\n        this.licensePolicy = licensePolicy;\n        this.fileSystem = fileSystem;\n        this.moduleIterator = new WebpackChunkModuleIterator_1.WebpackChunkModuleIterator();\n        this.innerModuleIterator = new WebpackInnerModuleIterator_1.WebpackInnerModuleIterator(require.resolve);\n    }\n    PluginChunkReadHandler.prototype.processChunk = function (compilation, chunk, moduleCache, stats) {\n        var _this = this;\n        this.moduleIterator.iterateModules(compilation, chunk, stats, function (chunkModule) {\n            _this.innerModuleIterator.iterateModules(chunkModule, function (module) {\n                var identifiedModule = _this.extractIdentifiedModule(module) ||\n                    _this.fileHandler.getModule(module.resource);\n                if (identifiedModule) {\n                    _this.processModule(compilation, chunk, moduleCache, identifiedModule);\n                }\n            });\n        });\n    };\n    PluginChunkReadHandler.prototype.extractIdentifiedModule = function (module) {\n        var resolved = module.resourceResolveData;\n        if (!resolved)\n            return undefined;\n        var directory = resolved.descriptionFileRoot, packageJson = resolved.descriptionFileData;\n        if (\n        // if missing data, fall back to fs module hunting\n        directory &&\n            packageJson &&\n            packageJson.name &&\n            // user checks to decide if we should include the module\n            this.fileHandler.isInModuleDirectory(directory) &&\n            !this.fileHandler.isBuildRoot(directory) &&\n            !this.fileHandler.excludedPackageTest(packageJson.name)) {\n            return {\n                directory: directory,\n                packageJson: packageJson,\n                name: packageJson.name\n            };\n        }\n        return undefined;\n    };\n    PluginChunkReadHandler.prototype.getPackageJson = function (directory) {\n        var filename = \"\" + directory + this.fileSystem.pathSeparator + \"package.json\";\n        return JSON.parse(this.fileSystem.readFileAsUtf8(filename));\n    };\n    PluginChunkReadHandler.prototype.processModule = function (compilation, chunk, moduleCache, module) {\n        var _a;\n        if (!moduleCache.alreadySeenForChunk(chunk.name, module.name)) {\n            var alreadyIncludedModule = moduleCache.getModule(module.name);\n            if (alreadyIncludedModule !== null) {\n                moduleCache.registerModule(chunk.name, alreadyIncludedModule);\n            }\n            else {\n                // module not yet in cache\n                var packageJson = (_a = module.packageJson) !== null && _a !== void 0 ? _a : this.getPackageJson(module.directory);\n                var licenseType = this.licenseTypeIdentifier.findLicenseIdentifier(compilation, module.name, packageJson);\n                if (this.licensePolicy.isLicenseUnacceptableFor(licenseType)) {\n                    this.logger.error(compilation, \"unacceptable license found for \" + module.name + \": \" + licenseType);\n                    this.licensePolicy.handleUnacceptableLicense(module.name, licenseType);\n                }\n                if (this.licensePolicy.isLicenseWrittenFor(licenseType)) {\n                    var licenseText = this.licenseTextReader.readLicense(compilation, module, licenseType);\n                    moduleCache.registerModule(chunk.name, {\n                        licenseText: licenseText,\n                        packageJson: packageJson,\n                        name: module.name,\n                        directory: module.directory,\n                        licenseId: licenseType\n                    });\n                }\n            }\n            moduleCache.markSeenForChunk(chunk.name, module.name);\n        }\n    };\n    return PluginChunkReadHandler;\n}());\nexports.PluginChunkReadHandler = PluginChunkReadHandler;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}