{"ast":null,"code":"'use strict';\n\nconst Tokenizer = require('parse5/lib/tokenizer');\n\nconst foreignContent = require('parse5/lib/common/foreign-content');\n\nconst unicode = require('parse5/lib/common/unicode');\n\nconst HTML = require('parse5/lib/common/html'); //Aliases\n\n\nconst $ = HTML.TAG_NAMES;\nconst NS = HTML.NAMESPACES; //ParserFeedbackSimulator\n//Simulates adjustment of the Tokenizer which performed by standard parser during tree construction.\n\nclass ParserFeedbackSimulator {\n  constructor(tokenizer) {\n    this.tokenizer = tokenizer;\n    this.namespaceStack = [];\n    this.namespaceStackTop = -1;\n\n    this._enterNamespace(NS.HTML);\n  }\n\n  getNextToken() {\n    const token = this.tokenizer.getNextToken();\n\n    if (token.type === Tokenizer.START_TAG_TOKEN) {\n      this._handleStartTagToken(token);\n    } else if (token.type === Tokenizer.END_TAG_TOKEN) {\n      this._handleEndTagToken(token);\n    } else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN && this.inForeignContent) {\n      token.type = Tokenizer.CHARACTER_TOKEN;\n      token.chars = unicode.REPLACEMENT_CHARACTER;\n    } else if (this.skipNextNewLine) {\n      if (token.type !== Tokenizer.HIBERNATION_TOKEN) {\n        this.skipNextNewLine = false;\n      }\n\n      if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n        if (token.chars.length === 1) {\n          return this.getNextToken();\n        }\n\n        token.chars = token.chars.substr(1);\n      }\n    }\n\n    return token;\n  } //Namespace stack mutations\n\n\n  _enterNamespace(namespace) {\n    this.namespaceStackTop++;\n    this.namespaceStack.push(namespace);\n    this.inForeignContent = namespace !== NS.HTML;\n    this.currentNamespace = namespace;\n    this.tokenizer.allowCDATA = this.inForeignContent;\n  }\n\n  _leaveCurrentNamespace() {\n    this.namespaceStackTop--;\n    this.namespaceStack.pop();\n    this.currentNamespace = this.namespaceStack[this.namespaceStackTop];\n    this.inForeignContent = this.currentNamespace !== NS.HTML;\n    this.tokenizer.allowCDATA = this.inForeignContent;\n  } //Token handlers\n\n\n  _ensureTokenizerMode(tn) {\n    if (tn === $.TEXTAREA || tn === $.TITLE) {\n      this.tokenizer.state = Tokenizer.MODE.RCDATA;\n    } else if (tn === $.PLAINTEXT) {\n      this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n    } else if (tn === $.SCRIPT) {\n      this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n    } else if (tn === $.STYLE || tn === $.IFRAME || tn === $.XMP || tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT) {\n      this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n    }\n  }\n\n  _handleStartTagToken(token) {\n    let tn = token.tagName;\n\n    if (tn === $.SVG) {\n      this._enterNamespace(NS.SVG);\n    } else if (tn === $.MATH) {\n      this._enterNamespace(NS.MATHML);\n    }\n\n    if (this.inForeignContent) {\n      if (foreignContent.causesExit(token)) {\n        this._leaveCurrentNamespace();\n\n        return;\n      }\n\n      const currentNs = this.currentNamespace;\n\n      if (currentNs === NS.MATHML) {\n        foreignContent.adjustTokenMathMLAttrs(token);\n      } else if (currentNs === NS.SVG) {\n        foreignContent.adjustTokenSVGTagName(token);\n        foreignContent.adjustTokenSVGAttrs(token);\n      }\n\n      foreignContent.adjustTokenXMLAttrs(token);\n      tn = token.tagName;\n\n      if (!token.selfClosing && foreignContent.isIntegrationPoint(tn, currentNs, token.attrs)) {\n        this._enterNamespace(NS.HTML);\n      }\n    } else {\n      if (tn === $.PRE || tn === $.TEXTAREA || tn === $.LISTING) {\n        this.skipNextNewLine = true;\n      } else if (tn === $.IMAGE) {\n        token.tagName = $.IMG;\n      }\n\n      this._ensureTokenizerMode(tn);\n    }\n  }\n\n  _handleEndTagToken(token) {\n    let tn = token.tagName;\n\n    if (!this.inForeignContent) {\n      const previousNs = this.namespaceStack[this.namespaceStackTop - 1];\n\n      if (previousNs === NS.SVG && foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn]) {\n        tn = foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn];\n      } //NOTE: check for exit from integration point\n\n\n      if (foreignContent.isIntegrationPoint(tn, previousNs, token.attrs)) {\n        this._leaveCurrentNamespace();\n      }\n    } else if (tn === $.SVG && this.currentNamespace === NS.SVG || tn === $.MATH && this.currentNamespace === NS.MATHML) {\n      this._leaveCurrentNamespace();\n    } // NOTE: adjust end tag name as well for consistency\n\n\n    if (this.currentNamespace === NS.SVG) {\n      foreignContent.adjustTokenSVGTagName(token);\n    }\n  }\n\n}\n\nmodule.exports = ParserFeedbackSimulator;","map":{"version":3,"names":["Tokenizer","require","foreignContent","unicode","HTML","$","TAG_NAMES","NS","NAMESPACES","ParserFeedbackSimulator","constructor","tokenizer","namespaceStack","namespaceStackTop","_enterNamespace","getNextToken","token","type","START_TAG_TOKEN","_handleStartTagToken","END_TAG_TOKEN","_handleEndTagToken","NULL_CHARACTER_TOKEN","inForeignContent","CHARACTER_TOKEN","chars","REPLACEMENT_CHARACTER","skipNextNewLine","HIBERNATION_TOKEN","WHITESPACE_CHARACTER_TOKEN","length","substr","namespace","push","currentNamespace","allowCDATA","_leaveCurrentNamespace","pop","_ensureTokenizerMode","tn","TEXTAREA","TITLE","state","MODE","RCDATA","PLAINTEXT","SCRIPT","SCRIPT_DATA","STYLE","IFRAME","XMP","NOEMBED","NOFRAMES","NOSCRIPT","RAWTEXT","tagName","SVG","MATH","MATHML","causesExit","currentNs","adjustTokenMathMLAttrs","adjustTokenSVGTagName","adjustTokenSVGAttrs","adjustTokenXMLAttrs","selfClosing","isIntegrationPoint","attrs","PRE","LISTING","IMAGE","IMG","previousNs","SVG_TAG_NAMES_ADJUSTMENT_MAP","module","exports"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/parse5-sax-parser/lib/parser-feedback-simulator.js"],"sourcesContent":["'use strict';\n\nconst Tokenizer = require('parse5/lib/tokenizer');\nconst foreignContent = require('parse5/lib/common/foreign-content');\nconst unicode = require('parse5/lib/common/unicode');\nconst HTML = require('parse5/lib/common/html');\n\n//Aliases\nconst $ = HTML.TAG_NAMES;\nconst NS = HTML.NAMESPACES;\n\n//ParserFeedbackSimulator\n//Simulates adjustment of the Tokenizer which performed by standard parser during tree construction.\nclass ParserFeedbackSimulator {\n    constructor(tokenizer) {\n        this.tokenizer = tokenizer;\n\n        this.namespaceStack = [];\n        this.namespaceStackTop = -1;\n        this._enterNamespace(NS.HTML);\n    }\n\n    getNextToken() {\n        const token = this.tokenizer.getNextToken();\n\n        if (token.type === Tokenizer.START_TAG_TOKEN) {\n            this._handleStartTagToken(token);\n        } else if (token.type === Tokenizer.END_TAG_TOKEN) {\n            this._handleEndTagToken(token);\n        } else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN && this.inForeignContent) {\n            token.type = Tokenizer.CHARACTER_TOKEN;\n            token.chars = unicode.REPLACEMENT_CHARACTER;\n        } else if (this.skipNextNewLine) {\n            if (token.type !== Tokenizer.HIBERNATION_TOKEN) {\n                this.skipNextNewLine = false;\n            }\n\n            if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n                if (token.chars.length === 1) {\n                    return this.getNextToken();\n                }\n\n                token.chars = token.chars.substr(1);\n            }\n        }\n\n        return token;\n    }\n\n    //Namespace stack mutations\n    _enterNamespace(namespace) {\n        this.namespaceStackTop++;\n        this.namespaceStack.push(namespace);\n\n        this.inForeignContent = namespace !== NS.HTML;\n        this.currentNamespace = namespace;\n        this.tokenizer.allowCDATA = this.inForeignContent;\n    }\n\n    _leaveCurrentNamespace() {\n        this.namespaceStackTop--;\n        this.namespaceStack.pop();\n\n        this.currentNamespace = this.namespaceStack[this.namespaceStackTop];\n        this.inForeignContent = this.currentNamespace !== NS.HTML;\n        this.tokenizer.allowCDATA = this.inForeignContent;\n    }\n\n    //Token handlers\n    _ensureTokenizerMode(tn) {\n        if (tn === $.TEXTAREA || tn === $.TITLE) {\n            this.tokenizer.state = Tokenizer.MODE.RCDATA;\n        } else if (tn === $.PLAINTEXT) {\n            this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n        } else if (tn === $.SCRIPT) {\n            this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n        } else if (\n            tn === $.STYLE ||\n            tn === $.IFRAME ||\n            tn === $.XMP ||\n            tn === $.NOEMBED ||\n            tn === $.NOFRAMES ||\n            tn === $.NOSCRIPT\n        ) {\n            this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n        }\n    }\n\n    _handleStartTagToken(token) {\n        let tn = token.tagName;\n\n        if (tn === $.SVG) {\n            this._enterNamespace(NS.SVG);\n        } else if (tn === $.MATH) {\n            this._enterNamespace(NS.MATHML);\n        }\n\n        if (this.inForeignContent) {\n            if (foreignContent.causesExit(token)) {\n                this._leaveCurrentNamespace();\n                return;\n            }\n\n            const currentNs = this.currentNamespace;\n\n            if (currentNs === NS.MATHML) {\n                foreignContent.adjustTokenMathMLAttrs(token);\n            } else if (currentNs === NS.SVG) {\n                foreignContent.adjustTokenSVGTagName(token);\n                foreignContent.adjustTokenSVGAttrs(token);\n            }\n\n            foreignContent.adjustTokenXMLAttrs(token);\n\n            tn = token.tagName;\n\n            if (!token.selfClosing && foreignContent.isIntegrationPoint(tn, currentNs, token.attrs)) {\n                this._enterNamespace(NS.HTML);\n            }\n        } else {\n            if (tn === $.PRE || tn === $.TEXTAREA || tn === $.LISTING) {\n                this.skipNextNewLine = true;\n            } else if (tn === $.IMAGE) {\n                token.tagName = $.IMG;\n            }\n\n            this._ensureTokenizerMode(tn);\n        }\n    }\n\n    _handleEndTagToken(token) {\n        let tn = token.tagName;\n\n        if (!this.inForeignContent) {\n            const previousNs = this.namespaceStack[this.namespaceStackTop - 1];\n\n            if (previousNs === NS.SVG && foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn]) {\n                tn = foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn];\n            }\n\n            //NOTE: check for exit from integration point\n            if (foreignContent.isIntegrationPoint(tn, previousNs, token.attrs)) {\n                this._leaveCurrentNamespace();\n            }\n        } else if (\n            (tn === $.SVG && this.currentNamespace === NS.SVG) ||\n            (tn === $.MATH && this.currentNamespace === NS.MATHML)\n        ) {\n            this._leaveCurrentNamespace();\n        }\n\n        // NOTE: adjust end tag name as well for consistency\n        if (this.currentNamespace === NS.SVG) {\n            foreignContent.adjustTokenSVGTagName(token);\n        }\n    }\n}\n\nmodule.exports = ParserFeedbackSimulator;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}