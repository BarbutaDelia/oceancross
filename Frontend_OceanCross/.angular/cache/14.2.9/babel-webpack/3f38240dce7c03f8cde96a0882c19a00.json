{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _asyncToGenerator = require(\"/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.buildServePath = exports.getDevServerConfig = void 0;\n\nconst core_1 = require(\"@angular-devkit/core\");\n\nconst fs_1 = require(\"fs\");\n\nconst path_1 = require(\"path\");\n\nconst url_1 = require(\"url\");\n\nconst error_1 = require(\"../../utils/error\");\n\nconst load_esm_1 = require(\"../../utils/load-esm\");\n\nconst webpack_browser_config_1 = require(\"../../utils/webpack-browser-config\");\n\nconst hmr_loader_1 = require(\"../plugins/hmr/hmr-loader\");\n\nfunction getDevServerConfig(_x) {\n  return _getDevServerConfig.apply(this, arguments);\n}\n\nfunction _getDevServerConfig() {\n  _getDevServerConfig = _asyncToGenerator(function* (wco) {\n    const {\n      buildOptions: {\n        host,\n        port,\n        index,\n        headers,\n        watch,\n        hmr,\n        main,\n        liveReload,\n        proxyConfig\n      },\n      logger,\n      root\n    } = wco;\n    const servePath = buildServePath(wco.buildOptions, logger);\n    const extraRules = [];\n\n    if (hmr) {\n      extraRules.push({\n        loader: hmr_loader_1.HmrLoader,\n        include: [main].map(p => (0, path_1.resolve)(wco.root, p))\n      });\n    }\n\n    const extraPlugins = [];\n\n    if (!watch) {\n      // There's no option to turn off file watching in webpack-dev-server, but\n      // we can override the file watcher instead.\n      extraPlugins.push({\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        apply: compiler => {\n          compiler.hooks.afterEnvironment.tap('angular-cli', () => {\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            compiler.watchFileSystem = {\n              watch: () => {}\n            };\n          });\n        }\n      });\n    }\n\n    return {\n      plugins: extraPlugins,\n      module: {\n        rules: extraRules\n      },\n      devServer: {\n        host,\n        port,\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          ...headers\n        },\n        historyApiFallback: !!index && {\n          index: path_1.posix.join(servePath, (0, webpack_browser_config_1.getIndexOutputFile)(index)),\n          disableDotRule: true,\n          htmlAcceptHeaders: ['text/html', 'application/xhtml+xml'],\n          rewrites: [{\n            from: new RegExp(`^(?!${servePath})/.*`),\n            to: context => context.parsedUrl.href\n          }]\n        },\n        // When setupExitSignals is enabled webpack-dev-server will shutdown gracefully which would\n        // require CTRL+C to be pressed multiple times to exit.\n        // See: https://github.com/webpack/webpack-dev-server/blob/c76b6d11a3821436c5e20207c8a38deb6ab7e33c/lib/Server.js#L1801-L1827\n        setupExitSignals: false,\n        compress: false,\n        static: false,\n        server: getServerConfig(root, wco.buildOptions),\n        allowedHosts: getAllowedHostsConfig(wco.buildOptions),\n        devMiddleware: {\n          publicPath: servePath,\n          stats: false\n        },\n        liveReload,\n        hot: hmr && !liveReload ? 'only' : hmr,\n        proxy: yield addProxyConfig(root, proxyConfig),\n        ...getWebSocketSettings(wco.buildOptions, servePath)\n      }\n    };\n  });\n  return _getDevServerConfig.apply(this, arguments);\n}\n\nexports.getDevServerConfig = getDevServerConfig;\n/**\n * Resolve and build a URL _path_ that will be the root of the server. This resolved base href and\n * deploy URL from the browser options and returns a path from the root.\n */\n\nfunction buildServePath(options, logger) {\n  let servePath = options.servePath;\n\n  if (servePath === undefined) {\n    const defaultPath = findDefaultServePath(options.baseHref, options.deployUrl);\n\n    if (defaultPath == null) {\n      logger.warn(core_1.tags.oneLine`\n        Warning: --deploy-url and/or --base-href contain unsupported values for ng serve. Default\n        serve path of '/' used. Use --serve-path to override.\n      `);\n    }\n\n    servePath = defaultPath || '';\n  }\n\n  if (servePath.endsWith('/')) {\n    servePath = servePath.slice(0, -1);\n  }\n\n  if (!servePath.startsWith('/')) {\n    servePath = `/${servePath}`;\n  }\n\n  return servePath;\n}\n\nexports.buildServePath = buildServePath;\n/**\n * Private method to enhance a webpack config with SSL configuration.\n * @private\n */\n\nfunction getServerConfig(root, options) {\n  const {\n    ssl,\n    sslCert,\n    sslKey\n  } = options;\n\n  if (!ssl) {\n    return 'http';\n  }\n\n  return {\n    type: 'https',\n    options: sslCert && sslKey ? {\n      key: (0, path_1.resolve)(root, sslKey),\n      cert: (0, path_1.resolve)(root, sslCert)\n    } : undefined\n  };\n}\n/**\n * Private method to enhance a webpack config with Proxy configuration.\n * @private\n */\n\n\nfunction addProxyConfig(_x2, _x3) {\n  return _addProxyConfig.apply(this, arguments);\n}\n/**\n * Calculates the line and column for an error offset in the content of a JSON file.\n * @param location The offset error location from the beginning of the content.\n * @param content The full content of the file containing the error.\n * @returns An object containing the line and column\n */\n\n\nfunction _addProxyConfig() {\n  _addProxyConfig = _asyncToGenerator(function* (root, proxyConfig) {\n    if (!proxyConfig) {\n      return undefined;\n    }\n\n    const proxyPath = (0, path_1.resolve)(root, proxyConfig);\n\n    if (!(0, fs_1.existsSync)(proxyPath)) {\n      throw new Error(`Proxy configuration file ${proxyPath} does not exist.`);\n    }\n\n    switch ((0, path_1.extname)(proxyPath)) {\n      case '.json':\n        {\n          const content = yield fs_1.promises.readFile(proxyPath, 'utf-8');\n          const {\n            parse,\n            printParseErrorCode\n          } = yield Promise.resolve().then(() => __importStar(require('jsonc-parser')));\n          const parseErrors = [];\n          const proxyConfiguration = parse(content, parseErrors, {\n            allowTrailingComma: true\n          });\n\n          if (parseErrors.length > 0) {\n            let errorMessage = `Proxy configuration file ${proxyPath} contains parse errors:`;\n\n            for (const parseError of parseErrors) {\n              const {\n                line,\n                column\n              } = getJsonErrorLineColumn(parseError.offset, content);\n              errorMessage += `\\n[${line}, ${column}] ${printParseErrorCode(parseError.error)}`;\n            }\n\n            throw new Error(errorMessage);\n          }\n\n          return proxyConfiguration;\n        }\n\n      case '.mjs':\n        // Load the ESM configuration file using the TypeScript dynamic import workaround.\n        // Once TypeScript provides support for keeping the dynamic import this workaround can be\n        // changed to a direct dynamic import.\n        return (yield (0, load_esm_1.loadEsmModule)((0, url_1.pathToFileURL)(proxyPath))).default;\n\n      case '.cjs':\n        return require(proxyPath);\n\n      default:\n        // The file could be either CommonJS or ESM.\n        // CommonJS is tried first then ESM if loading fails.\n        try {\n          return require(proxyPath);\n        } catch (e) {\n          (0, error_1.assertIsError)(e);\n\n          if (e.code === 'ERR_REQUIRE_ESM') {\n            // Load the ESM configuration file using the TypeScript dynamic import workaround.\n            // Once TypeScript provides support for keeping the dynamic import this workaround can be\n            // changed to a direct dynamic import.\n            return (yield (0, load_esm_1.loadEsmModule)((0, url_1.pathToFileURL)(proxyPath))).default;\n          }\n\n          throw e;\n        }\n\n    }\n  });\n  return _addProxyConfig.apply(this, arguments);\n}\n\nfunction getJsonErrorLineColumn(offset, content) {\n  if (offset === 0) {\n    return {\n      line: 1,\n      column: 1\n    };\n  }\n\n  let line = 0;\n  let position = 0; // eslint-disable-next-line no-constant-condition\n\n  while (true) {\n    ++line;\n    const nextNewline = content.indexOf('\\n', position);\n\n    if (nextNewline === -1 || nextNewline > offset) {\n      break;\n    }\n\n    position = nextNewline + 1;\n  }\n\n  return {\n    line,\n    column: offset - position + 1\n  };\n}\n/**\n * Find the default server path. We don't want to expose baseHref and deployUrl as arguments, only\n * the browser options where needed. This method should stay private (people who want to resolve\n * baseHref and deployUrl should use the buildServePath exported function.\n * @private\n */\n\n\nfunction findDefaultServePath(baseHref, deployUrl) {\n  if (!baseHref && !deployUrl) {\n    return '';\n  }\n\n  if (/^(\\w+:)?\\/\\//.test(baseHref || '') || /^(\\w+:)?\\/\\//.test(deployUrl || '')) {\n    // If baseHref or deployUrl is absolute, unsupported by ng serve\n    return null;\n  } // normalize baseHref\n  // for ng serve the starting base is always `/` so a relative\n  // and root relative value are identical\n\n\n  const baseHrefParts = (baseHref || '').split('/').filter(part => part !== '');\n\n  if (baseHref && !baseHref.endsWith('/')) {\n    baseHrefParts.pop();\n  }\n\n  const normalizedBaseHref = baseHrefParts.length === 0 ? '/' : `/${baseHrefParts.join('/')}/`;\n\n  if (deployUrl && deployUrl[0] === '/') {\n    if (baseHref && baseHref[0] === '/' && normalizedBaseHref !== deployUrl) {\n      // If baseHref and deployUrl are root relative and not equivalent, unsupported by ng serve\n      return null;\n    }\n\n    return deployUrl;\n  } // Join together baseHref and deployUrl\n\n\n  return `${normalizedBaseHref}${deployUrl || ''}`;\n}\n\nfunction getAllowedHostsConfig(options) {\n  var _a;\n\n  if (options.disableHostCheck) {\n    return 'all';\n  } else if ((_a = options.allowedHosts) === null || _a === void 0 ? void 0 : _a.length) {\n    return options.allowedHosts;\n  }\n\n  return undefined;\n}\n\nfunction getWebSocketSettings(options, servePath) {\n  const {\n    hmr,\n    liveReload\n  } = options;\n\n  if (!hmr && !liveReload) {\n    return {\n      webSocketServer: false,\n      client: undefined\n    };\n  }\n\n  const webSocketPath = path_1.posix.join(servePath, 'ng-cli-ws');\n  return {\n    webSocketServer: {\n      options: {\n        path: webSocketPath\n      }\n    },\n    client: {\n      logging: 'info',\n      webSocketURL: getPublicHostOptions(options, webSocketPath),\n      overlay: {\n        errors: true,\n        warnings: false\n      }\n    }\n  };\n}\n\nfunction getPublicHostOptions(options, webSocketPath) {\n  let publicHost = options.publicHost;\n\n  if (publicHost) {\n    const hostWithProtocol = !/^\\w+:\\/\\//.test(publicHost) ? `https://${publicHost}` : publicHost;\n    publicHost = new url_1.URL(hostWithProtocol).host;\n  }\n\n  return `auto://${publicHost || '0.0.0.0:0'}${webSocketPath}`;\n}","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","buildServePath","getDevServerConfig","core_1","require","fs_1","path_1","url_1","error_1","load_esm_1","webpack_browser_config_1","hmr_loader_1","wco","buildOptions","host","port","index","headers","watch","hmr","main","liveReload","proxyConfig","logger","root","servePath","extraRules","push","loader","HmrLoader","include","map","p","resolve","extraPlugins","apply","compiler","hooks","afterEnvironment","tap","watchFileSystem","plugins","module","rules","devServer","historyApiFallback","posix","join","getIndexOutputFile","disableDotRule","htmlAcceptHeaders","rewrites","from","RegExp","to","context","parsedUrl","href","setupExitSignals","compress","static","server","getServerConfig","allowedHosts","getAllowedHostsConfig","devMiddleware","publicPath","stats","hot","proxy","addProxyConfig","getWebSocketSettings","options","defaultPath","findDefaultServePath","baseHref","deployUrl","warn","tags","oneLine","endsWith","slice","startsWith","ssl","sslCert","sslKey","type","key","cert","proxyPath","existsSync","Error","extname","content","promises","readFile","parse","printParseErrorCode","Promise","then","parseErrors","proxyConfiguration","allowTrailingComma","length","errorMessage","parseError","line","column","getJsonErrorLineColumn","offset","error","loadEsmModule","pathToFileURL","default","e","assertIsError","code","position","nextNewline","indexOf","test","baseHrefParts","split","filter","part","pop","normalizedBaseHref","_a","disableHostCheck","webSocketServer","client","webSocketPath","path","logging","webSocketURL","getPublicHostOptions","overlay","errors","warnings","publicHost","hostWithProtocol","URL"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@angular-devkit/build-angular/src/webpack/configs/dev-server.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildServePath = exports.getDevServerConfig = void 0;\nconst core_1 = require(\"@angular-devkit/core\");\nconst fs_1 = require(\"fs\");\nconst path_1 = require(\"path\");\nconst url_1 = require(\"url\");\nconst error_1 = require(\"../../utils/error\");\nconst load_esm_1 = require(\"../../utils/load-esm\");\nconst webpack_browser_config_1 = require(\"../../utils/webpack-browser-config\");\nconst hmr_loader_1 = require(\"../plugins/hmr/hmr-loader\");\nasync function getDevServerConfig(wco) {\n    const { buildOptions: { host, port, index, headers, watch, hmr, main, liveReload, proxyConfig }, logger, root, } = wco;\n    const servePath = buildServePath(wco.buildOptions, logger);\n    const extraRules = [];\n    if (hmr) {\n        extraRules.push({\n            loader: hmr_loader_1.HmrLoader,\n            include: [main].map((p) => (0, path_1.resolve)(wco.root, p)),\n        });\n    }\n    const extraPlugins = [];\n    if (!watch) {\n        // There's no option to turn off file watching in webpack-dev-server, but\n        // we can override the file watcher instead.\n        extraPlugins.push({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            apply: (compiler) => {\n                compiler.hooks.afterEnvironment.tap('angular-cli', () => {\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\n                    compiler.watchFileSystem = { watch: () => { } };\n                });\n            },\n        });\n    }\n    return {\n        plugins: extraPlugins,\n        module: {\n            rules: extraRules,\n        },\n        devServer: {\n            host,\n            port,\n            headers: {\n                'Access-Control-Allow-Origin': '*',\n                ...headers,\n            },\n            historyApiFallback: !!index && {\n                index: path_1.posix.join(servePath, (0, webpack_browser_config_1.getIndexOutputFile)(index)),\n                disableDotRule: true,\n                htmlAcceptHeaders: ['text/html', 'application/xhtml+xml'],\n                rewrites: [\n                    {\n                        from: new RegExp(`^(?!${servePath})/.*`),\n                        to: (context) => context.parsedUrl.href,\n                    },\n                ],\n            },\n            // When setupExitSignals is enabled webpack-dev-server will shutdown gracefully which would\n            // require CTRL+C to be pressed multiple times to exit.\n            // See: https://github.com/webpack/webpack-dev-server/blob/c76b6d11a3821436c5e20207c8a38deb6ab7e33c/lib/Server.js#L1801-L1827\n            setupExitSignals: false,\n            compress: false,\n            static: false,\n            server: getServerConfig(root, wco.buildOptions),\n            allowedHosts: getAllowedHostsConfig(wco.buildOptions),\n            devMiddleware: {\n                publicPath: servePath,\n                stats: false,\n            },\n            liveReload,\n            hot: hmr && !liveReload ? 'only' : hmr,\n            proxy: await addProxyConfig(root, proxyConfig),\n            ...getWebSocketSettings(wco.buildOptions, servePath),\n        },\n    };\n}\nexports.getDevServerConfig = getDevServerConfig;\n/**\n * Resolve and build a URL _path_ that will be the root of the server. This resolved base href and\n * deploy URL from the browser options and returns a path from the root.\n */\nfunction buildServePath(options, logger) {\n    let servePath = options.servePath;\n    if (servePath === undefined) {\n        const defaultPath = findDefaultServePath(options.baseHref, options.deployUrl);\n        if (defaultPath == null) {\n            logger.warn(core_1.tags.oneLine `\n        Warning: --deploy-url and/or --base-href contain unsupported values for ng serve. Default\n        serve path of '/' used. Use --serve-path to override.\n      `);\n        }\n        servePath = defaultPath || '';\n    }\n    if (servePath.endsWith('/')) {\n        servePath = servePath.slice(0, -1);\n    }\n    if (!servePath.startsWith('/')) {\n        servePath = `/${servePath}`;\n    }\n    return servePath;\n}\nexports.buildServePath = buildServePath;\n/**\n * Private method to enhance a webpack config with SSL configuration.\n * @private\n */\nfunction getServerConfig(root, options) {\n    const { ssl, sslCert, sslKey } = options;\n    if (!ssl) {\n        return 'http';\n    }\n    return {\n        type: 'https',\n        options: sslCert && sslKey\n            ? {\n                key: (0, path_1.resolve)(root, sslKey),\n                cert: (0, path_1.resolve)(root, sslCert),\n            }\n            : undefined,\n    };\n}\n/**\n * Private method to enhance a webpack config with Proxy configuration.\n * @private\n */\nasync function addProxyConfig(root, proxyConfig) {\n    if (!proxyConfig) {\n        return undefined;\n    }\n    const proxyPath = (0, path_1.resolve)(root, proxyConfig);\n    if (!(0, fs_1.existsSync)(proxyPath)) {\n        throw new Error(`Proxy configuration file ${proxyPath} does not exist.`);\n    }\n    switch ((0, path_1.extname)(proxyPath)) {\n        case '.json': {\n            const content = await fs_1.promises.readFile(proxyPath, 'utf-8');\n            const { parse, printParseErrorCode } = await Promise.resolve().then(() => __importStar(require('jsonc-parser')));\n            const parseErrors = [];\n            const proxyConfiguration = parse(content, parseErrors, { allowTrailingComma: true });\n            if (parseErrors.length > 0) {\n                let errorMessage = `Proxy configuration file ${proxyPath} contains parse errors:`;\n                for (const parseError of parseErrors) {\n                    const { line, column } = getJsonErrorLineColumn(parseError.offset, content);\n                    errorMessage += `\\n[${line}, ${column}] ${printParseErrorCode(parseError.error)}`;\n                }\n                throw new Error(errorMessage);\n            }\n            return proxyConfiguration;\n        }\n        case '.mjs':\n            // Load the ESM configuration file using the TypeScript dynamic import workaround.\n            // Once TypeScript provides support for keeping the dynamic import this workaround can be\n            // changed to a direct dynamic import.\n            return (await (0, load_esm_1.loadEsmModule)((0, url_1.pathToFileURL)(proxyPath))).default;\n        case '.cjs':\n            return require(proxyPath);\n        default:\n            // The file could be either CommonJS or ESM.\n            // CommonJS is tried first then ESM if loading fails.\n            try {\n                return require(proxyPath);\n            }\n            catch (e) {\n                (0, error_1.assertIsError)(e);\n                if (e.code === 'ERR_REQUIRE_ESM') {\n                    // Load the ESM configuration file using the TypeScript dynamic import workaround.\n                    // Once TypeScript provides support for keeping the dynamic import this workaround can be\n                    // changed to a direct dynamic import.\n                    return (await (0, load_esm_1.loadEsmModule)((0, url_1.pathToFileURL)(proxyPath))).default;\n                }\n                throw e;\n            }\n    }\n}\n/**\n * Calculates the line and column for an error offset in the content of a JSON file.\n * @param location The offset error location from the beginning of the content.\n * @param content The full content of the file containing the error.\n * @returns An object containing the line and column\n */\nfunction getJsonErrorLineColumn(offset, content) {\n    if (offset === 0) {\n        return { line: 1, column: 1 };\n    }\n    let line = 0;\n    let position = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        ++line;\n        const nextNewline = content.indexOf('\\n', position);\n        if (nextNewline === -1 || nextNewline > offset) {\n            break;\n        }\n        position = nextNewline + 1;\n    }\n    return { line, column: offset - position + 1 };\n}\n/**\n * Find the default server path. We don't want to expose baseHref and deployUrl as arguments, only\n * the browser options where needed. This method should stay private (people who want to resolve\n * baseHref and deployUrl should use the buildServePath exported function.\n * @private\n */\nfunction findDefaultServePath(baseHref, deployUrl) {\n    if (!baseHref && !deployUrl) {\n        return '';\n    }\n    if (/^(\\w+:)?\\/\\//.test(baseHref || '') || /^(\\w+:)?\\/\\//.test(deployUrl || '')) {\n        // If baseHref or deployUrl is absolute, unsupported by ng serve\n        return null;\n    }\n    // normalize baseHref\n    // for ng serve the starting base is always `/` so a relative\n    // and root relative value are identical\n    const baseHrefParts = (baseHref || '').split('/').filter((part) => part !== '');\n    if (baseHref && !baseHref.endsWith('/')) {\n        baseHrefParts.pop();\n    }\n    const normalizedBaseHref = baseHrefParts.length === 0 ? '/' : `/${baseHrefParts.join('/')}/`;\n    if (deployUrl && deployUrl[0] === '/') {\n        if (baseHref && baseHref[0] === '/' && normalizedBaseHref !== deployUrl) {\n            // If baseHref and deployUrl are root relative and not equivalent, unsupported by ng serve\n            return null;\n        }\n        return deployUrl;\n    }\n    // Join together baseHref and deployUrl\n    return `${normalizedBaseHref}${deployUrl || ''}`;\n}\nfunction getAllowedHostsConfig(options) {\n    var _a;\n    if (options.disableHostCheck) {\n        return 'all';\n    }\n    else if ((_a = options.allowedHosts) === null || _a === void 0 ? void 0 : _a.length) {\n        return options.allowedHosts;\n    }\n    return undefined;\n}\nfunction getWebSocketSettings(options, servePath) {\n    const { hmr, liveReload } = options;\n    if (!hmr && !liveReload) {\n        return {\n            webSocketServer: false,\n            client: undefined,\n        };\n    }\n    const webSocketPath = path_1.posix.join(servePath, 'ng-cli-ws');\n    return {\n        webSocketServer: {\n            options: {\n                path: webSocketPath,\n            },\n        },\n        client: {\n            logging: 'info',\n            webSocketURL: getPublicHostOptions(options, webSocketPath),\n            overlay: {\n                errors: true,\n                warnings: false,\n            },\n        },\n    };\n}\nfunction getPublicHostOptions(options, webSocketPath) {\n    let publicHost = options.publicHost;\n    if (publicHost) {\n        const hostWithProtocol = !/^\\w+:\\/\\//.test(publicHost) ? `https://${publicHost}` : publicHost;\n        publicHost = new url_1.URL(hostWithProtocol).host;\n    }\n    return `auto://${publicHost || '0.0.0.0:0'}${webSocketPath}`;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}