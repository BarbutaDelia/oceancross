{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DedupeModuleResolvePlugin = void 0;\n\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\"); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction getResourceData(resolveData) {\n  const {\n    descriptionFileData,\n    relativePath\n  } = resolveData.createData.resourceResolveData;\n  return {\n    packageName: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.name,\n    packageVersion: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.version,\n    relativePath,\n    resource: resolveData.createData.resource\n  };\n}\n/**\n * DedupeModuleResolvePlugin is a webpack plugin which dedupes modules with the same name and versions\n * that are laid out in different parts of the node_modules tree.\n *\n * This is needed because Webpack relies on package managers to hoist modules and doesn't have any deduping logic.\n *\n * This is similar to how Webpack's 'NormalModuleReplacementPlugin' works\n * @see https://github.com/webpack/webpack/blob/4a1f068828c2ab47537d8be30d542cd3a1076db4/lib/NormalModuleReplacementPlugin.js#L9\n */\n\n\nclass DedupeModuleResolvePlugin {\n  constructor(options) {\n    this.options = options;\n    this.modules = new Map();\n  }\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap('DedupeModuleResolvePlugin', (compilation, {\n      normalModuleFactory\n    }) => {\n      normalModuleFactory.hooks.afterResolve.tap('DedupeModuleResolvePlugin', result => {\n        var _a;\n\n        if (!result) {\n          return;\n        }\n\n        const {\n          packageName,\n          packageVersion,\n          relativePath,\n          resource\n        } = getResourceData(result); // Empty name or versions are no valid primary  entrypoints of a library\n\n        if (!packageName || !packageVersion) {\n          return;\n        }\n\n        const moduleId = packageName + '@' + packageVersion + ':' + relativePath;\n        const prevResolvedModule = this.modules.get(moduleId);\n\n        if (!prevResolvedModule) {\n          // This is the first time we visit this module.\n          this.modules.set(moduleId, {\n            resource,\n            request: result.request\n          });\n          return;\n        }\n\n        const {\n          resource: prevResource,\n          request: prevRequest\n        } = prevResolvedModule;\n\n        if (resource === prevResource) {\n          // No deduping needed.\n          // Current path and previously resolved path are the same.\n          return;\n        }\n\n        if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.verbose) {\n          (0, webpack_diagnostics_1.addWarning)(compilation, `[DedupeModuleResolvePlugin]: ${resource} -> ${prevResource}`);\n        } // Alter current request with previously resolved module.\n\n\n        const createData = result.createData;\n        createData.resource = prevResource;\n        createData.userRequest = prevRequest;\n      });\n    });\n  }\n\n}\n\nexports.DedupeModuleResolvePlugin = DedupeModuleResolvePlugin;","map":{"version":3,"names":["Object","defineProperty","exports","value","DedupeModuleResolvePlugin","webpack_diagnostics_1","require","getResourceData","resolveData","descriptionFileData","relativePath","createData","resourceResolveData","packageName","name","packageVersion","version","resource","constructor","options","modules","Map","apply","compiler","hooks","compilation","tap","normalModuleFactory","afterResolve","result","_a","moduleId","prevResolvedModule","get","set","request","prevResource","prevRequest","verbose","addWarning","userRequest"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@angular-devkit/build-angular/src/webpack/plugins/dedupe-module-resolve-plugin.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DedupeModuleResolvePlugin = void 0;\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getResourceData(resolveData) {\n    const { descriptionFileData, relativePath } = resolveData.createData.resourceResolveData;\n    return {\n        packageName: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.name,\n        packageVersion: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.version,\n        relativePath,\n        resource: resolveData.createData.resource,\n    };\n}\n/**\n * DedupeModuleResolvePlugin is a webpack plugin which dedupes modules with the same name and versions\n * that are laid out in different parts of the node_modules tree.\n *\n * This is needed because Webpack relies on package managers to hoist modules and doesn't have any deduping logic.\n *\n * This is similar to how Webpack's 'NormalModuleReplacementPlugin' works\n * @see https://github.com/webpack/webpack/blob/4a1f068828c2ab47537d8be30d542cd3a1076db4/lib/NormalModuleReplacementPlugin.js#L9\n */\nclass DedupeModuleResolvePlugin {\n    constructor(options) {\n        this.options = options;\n        this.modules = new Map();\n    }\n    apply(compiler) {\n        compiler.hooks.compilation.tap('DedupeModuleResolvePlugin', (compilation, { normalModuleFactory }) => {\n            normalModuleFactory.hooks.afterResolve.tap('DedupeModuleResolvePlugin', (result) => {\n                var _a;\n                if (!result) {\n                    return;\n                }\n                const { packageName, packageVersion, relativePath, resource } = getResourceData(result);\n                // Empty name or versions are no valid primary  entrypoints of a library\n                if (!packageName || !packageVersion) {\n                    return;\n                }\n                const moduleId = packageName + '@' + packageVersion + ':' + relativePath;\n                const prevResolvedModule = this.modules.get(moduleId);\n                if (!prevResolvedModule) {\n                    // This is the first time we visit this module.\n                    this.modules.set(moduleId, {\n                        resource,\n                        request: result.request,\n                    });\n                    return;\n                }\n                const { resource: prevResource, request: prevRequest } = prevResolvedModule;\n                if (resource === prevResource) {\n                    // No deduping needed.\n                    // Current path and previously resolved path are the same.\n                    return;\n                }\n                if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.verbose) {\n                    (0, webpack_diagnostics_1.addWarning)(compilation, `[DedupeModuleResolvePlugin]: ${resource} -> ${prevResource}`);\n                }\n                // Alter current request with previously resolved module.\n                const createData = result.createData;\n                createData.resource = prevResource;\n                createData.userRequest = prevRequest;\n            });\n        });\n    }\n}\nexports.DedupeModuleResolvePlugin = DedupeModuleResolvePlugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}