{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _asyncToGenerator = require(\"/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar _awaitAsyncGenerator = require(\"/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js\").default;\n\nvar _wrapAsyncGenerator = require(\"/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js\").default;\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BundleActionExecutor = void 0;\n\nconst piscina_1 = __importDefault(require(\"piscina\"));\n\nconst environment_options_1 = require(\"./environment-options\");\n\nconst workerFile = require.resolve('./process-bundle');\n\nclass BundleActionExecutor {\n  constructor(workerOptions) {\n    this.workerOptions = workerOptions;\n  }\n\n  ensureWorkerPool() {\n    if (this.workerPool) {\n      return this.workerPool;\n    }\n\n    this.workerPool = new piscina_1.default({\n      filename: workerFile,\n      name: 'inlineLocales',\n      workerData: this.workerOptions,\n      maxThreads: environment_options_1.maxWorkers\n    });\n    return this.workerPool;\n  }\n\n  inline(action) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return _this.ensureWorkerPool().run(action, {\n        name: 'inlineLocales'\n      });\n    })();\n  }\n\n  inlineAll(actions) {\n    return BundleActionExecutor.executeAll(actions, action => this.inline(action));\n  }\n\n  static executeAll(actions, executor) {\n    return _wrapAsyncGenerator(function* () {\n      const executions = new Map();\n\n      for (const action of actions) {\n        const execution = executor(action);\n        executions.set(execution, execution.then(result => [execution, result]));\n      }\n\n      while (executions.size > 0) {\n        const [execution, result] = yield _awaitAsyncGenerator(Promise.race(executions.values()));\n        executions.delete(execution);\n        yield result;\n      }\n    })();\n  }\n\n  stop() {\n    var _a;\n\n    void ((_a = this.workerPool) === null || _a === void 0 ? void 0 : _a.destroy());\n  }\n\n}\n\nexports.BundleActionExecutor = BundleActionExecutor;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","BundleActionExecutor","piscina_1","require","environment_options_1","workerFile","resolve","constructor","workerOptions","ensureWorkerPool","workerPool","default","filename","name","workerData","maxThreads","maxWorkers","inline","action","run","inlineAll","actions","executeAll","executor","executions","Map","execution","set","then","result","size","Promise","race","values","delete","stop","_a","destroy"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@angular-devkit/build-angular/src/utils/action-executor.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BundleActionExecutor = void 0;\nconst piscina_1 = __importDefault(require(\"piscina\"));\nconst environment_options_1 = require(\"./environment-options\");\nconst workerFile = require.resolve('./process-bundle');\nclass BundleActionExecutor {\n    constructor(workerOptions) {\n        this.workerOptions = workerOptions;\n    }\n    ensureWorkerPool() {\n        if (this.workerPool) {\n            return this.workerPool;\n        }\n        this.workerPool = new piscina_1.default({\n            filename: workerFile,\n            name: 'inlineLocales',\n            workerData: this.workerOptions,\n            maxThreads: environment_options_1.maxWorkers,\n        });\n        return this.workerPool;\n    }\n    async inline(action) {\n        return this.ensureWorkerPool().run(action, { name: 'inlineLocales' });\n    }\n    inlineAll(actions) {\n        return BundleActionExecutor.executeAll(actions, (action) => this.inline(action));\n    }\n    static async *executeAll(actions, executor) {\n        const executions = new Map();\n        for (const action of actions) {\n            const execution = executor(action);\n            executions.set(execution, execution.then((result) => [execution, result]));\n        }\n        while (executions.size > 0) {\n            const [execution, result] = await Promise.race(executions.values());\n            executions.delete(execution);\n            yield result;\n        }\n    }\n    stop() {\n        var _a;\n        void ((_a = this.workerPool) === null || _a === void 0 ? void 0 : _a.destroy());\n    }\n}\nexports.BundleActionExecutor = BundleActionExecutor;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;IAAE,WAAWA;EAAb,CAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,oBAAR,GAA+B,KAAK,CAApC;;AACA,MAAMC,SAAS,GAAGR,eAAe,CAACS,OAAO,CAAC,SAAD,CAAR,CAAjC;;AACA,MAAMC,qBAAqB,GAAGD,OAAO,CAAC,uBAAD,CAArC;;AACA,MAAME,UAAU,GAAGF,OAAO,CAACG,OAAR,CAAgB,kBAAhB,CAAnB;;AACA,MAAML,oBAAN,CAA2B;EACvBM,WAAW,CAACC,aAAD,EAAgB;IACvB,KAAKA,aAAL,GAAqBA,aAArB;EACH;;EACDC,gBAAgB,GAAG;IACf,IAAI,KAAKC,UAAT,EAAqB;MACjB,OAAO,KAAKA,UAAZ;IACH;;IACD,KAAKA,UAAL,GAAkB,IAAIR,SAAS,CAACS,OAAd,CAAsB;MACpCC,QAAQ,EAAEP,UAD0B;MAEpCQ,IAAI,EAAE,eAF8B;MAGpCC,UAAU,EAAE,KAAKN,aAHmB;MAIpCO,UAAU,EAAEX,qBAAqB,CAACY;IAJE,CAAtB,CAAlB;IAMA,OAAO,KAAKN,UAAZ;EACH;;EACKO,MAAM,CAACC,MAAD,EAAS;IAAA;;IAAA;MACjB,OAAO,KAAI,CAACT,gBAAL,GAAwBU,GAAxB,CAA4BD,MAA5B,EAAoC;QAAEL,IAAI,EAAE;MAAR,CAApC,CAAP;IADiB;EAEpB;;EACDO,SAAS,CAACC,OAAD,EAAU;IACf,OAAOpB,oBAAoB,CAACqB,UAArB,CAAgCD,OAAhC,EAA0CH,MAAD,IAAY,KAAKD,MAAL,CAAYC,MAAZ,CAArD,CAAP;EACH;;EACuB,OAAVI,UAAU,CAACD,OAAD,EAAUE,QAAV,EAAoB;IAAA;MACxC,MAAMC,UAAU,GAAG,IAAIC,GAAJ,EAAnB;;MACA,KAAK,MAAMP,MAAX,IAAqBG,OAArB,EAA8B;QAC1B,MAAMK,SAAS,GAAGH,QAAQ,CAACL,MAAD,CAA1B;QACAM,UAAU,CAACG,GAAX,CAAeD,SAAf,EAA0BA,SAAS,CAACE,IAAV,CAAgBC,MAAD,IAAY,CAACH,SAAD,EAAYG,MAAZ,CAA3B,CAA1B;MACH;;MACD,OAAOL,UAAU,CAACM,IAAX,GAAkB,CAAzB,EAA4B;QACxB,MAAM,CAACJ,SAAD,EAAYG,MAAZ,+BAA4BE,OAAO,CAACC,IAAR,CAAaR,UAAU,CAACS,MAAX,EAAb,CAA5B,CAAN;QACAT,UAAU,CAACU,MAAX,CAAkBR,SAAlB;QACA,MAAMG,MAAN;MACH;IAVuC;EAW3C;;EACDM,IAAI,GAAG;IACH,IAAIC,EAAJ;;IACA,MAAM,CAACA,EAAE,GAAG,KAAK1B,UAAX,MAA2B,IAA3B,IAAmC0B,EAAE,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,EAAE,CAACC,OAAH,EAAlE;EACH;;AArCsB;;AAuC3BtC,OAAO,CAACE,oBAAR,GAA+BA,oBAA/B"},"metadata":{},"sourceType":"script"}