{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonJsUsageWarnPlugin = void 0;\n\nconst path_1 = require(\"path\");\n\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\"); // Webpack doesn't export these so the deep imports can potentially break.\n\n\nconst AMDDefineDependency = require('webpack/lib/dependencies/AMDDefineDependency');\n\nconst CommonJsExportsDependency = require('webpack/lib/dependencies/CommonJsExportsDependency');\n\nconst CommonJsRequireDependency = require('webpack/lib/dependencies/CommonJsRequireDependency');\n\nconst CommonJsSelfReferenceDependency = require('webpack/lib/dependencies/CommonJsSelfReferenceDependency');\n\nclass CommonJsUsageWarnPlugin {\n  constructor(options = {}) {\n    this.options = options;\n    this.shownWarnings = new Set();\n    this.allowedDependencies = new Set(this.options.allowedDependencies);\n  }\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap('CommonJsUsageWarnPlugin', compilation => {\n      compilation.hooks.finishModules.tap('CommonJsUsageWarnPlugin', modules => {\n        var _a;\n\n        const mainEntry = compilation.entries.get('main');\n\n        if (!mainEntry) {\n          return;\n        }\n\n        const mainModules = new Set(mainEntry.dependencies.map(dep => compilation.moduleGraph.getModule(dep)));\n\n        for (const module of modules) {\n          const {\n            dependencies,\n            rawRequest\n          } = module;\n\n          if (!rawRequest || rawRequest.startsWith('.') || (0, path_1.isAbsolute)(rawRequest) || this.allowedDependencies.has(rawRequest) || this.allowedDependencies.has(this.rawRequestToPackageName(rawRequest)) || rawRequest.startsWith('@angular/common/locales/')) {\n            /**\n             * Skip when:\n             * - module is absolute or relative.\n             * - module is allowed even if it's a CommonJS.\n             * - module is a locale imported from '@angular/common'.\n             */\n            continue;\n          }\n\n          if (this.hasCommonJsDependencies(compilation, dependencies)) {\n            // Dependency is CommonsJS or AMD.\n            const issuer = getIssuer(compilation, module); // Check if it's parent issuer is also a CommonJS dependency.\n            // In case it is skip as an warning will be show for the parent CommonJS dependency.\n\n            const parentDependencies = (_a = getIssuer(compilation, issuer)) === null || _a === void 0 ? void 0 : _a.dependencies;\n\n            if (parentDependencies && this.hasCommonJsDependencies(compilation, parentDependencies, true)) {\n              continue;\n            } // Find the main issuer (entry-point).\n\n\n            let mainIssuer = issuer;\n            let nextIssuer = getIssuer(compilation, mainIssuer);\n\n            while (nextIssuer) {\n              mainIssuer = nextIssuer;\n              nextIssuer = getIssuer(compilation, mainIssuer);\n            } // Only show warnings for modules from main entrypoint.\n            // And if the issuer request is not from 'webpack-dev-server', as 'webpack-dev-server'\n            // will require CommonJS libraries for live reloading such as 'sockjs-node'.\n\n\n            if (mainIssuer && mainModules.has(mainIssuer)) {\n              const warning = `${issuer === null || issuer === void 0 ? void 0 : issuer.userRequest} depends on '${rawRequest}'. ` + 'CommonJS or AMD dependencies can cause optimization bailouts.\\n' + 'For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies'; // Avoid showing the same warning multiple times when in 'watch' mode.\n\n              if (!this.shownWarnings.has(warning)) {\n                (0, webpack_diagnostics_1.addWarning)(compilation, warning);\n                this.shownWarnings.add(warning);\n              }\n            }\n          }\n        }\n      });\n    });\n  }\n\n  hasCommonJsDependencies(compilation, dependencies, checkParentModules = false) {\n    for (const dep of dependencies) {\n      if (dep instanceof CommonJsRequireDependency || dep instanceof CommonJsExportsDependency || dep instanceof CommonJsSelfReferenceDependency || dep instanceof AMDDefineDependency) {\n        return true;\n      }\n\n      if (checkParentModules) {\n        const module = getWebpackModule(compilation, dep);\n\n        if (module && this.hasCommonJsDependencies(compilation, module.dependencies)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  rawRequestToPackageName(rawRequest) {\n    return rawRequest.startsWith('@') ? // Scoped request ex: @angular/common/locale/en -> @angular/common\n    rawRequest.split('/', 2).join('/') : // Non-scoped request ex: lodash/isEmpty -> lodash\n    rawRequest.split('/', 1)[0];\n  }\n\n}\n\nexports.CommonJsUsageWarnPlugin = CommonJsUsageWarnPlugin;\n\nfunction getIssuer(compilation, module) {\n  if (!module) {\n    return null;\n  }\n\n  return compilation.moduleGraph.getIssuer(module);\n}\n\nfunction getWebpackModule(compilation, dependency) {\n  if (!dependency) {\n    return null;\n  }\n\n  return compilation.moduleGraph.getModule(dependency);\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","CommonJsUsageWarnPlugin","path_1","require","webpack_diagnostics_1","AMDDefineDependency","CommonJsExportsDependency","CommonJsRequireDependency","CommonJsSelfReferenceDependency","constructor","options","shownWarnings","Set","allowedDependencies","apply","compiler","hooks","compilation","tap","finishModules","modules","_a","mainEntry","entries","get","mainModules","dependencies","map","dep","moduleGraph","getModule","module","rawRequest","startsWith","isAbsolute","has","rawRequestToPackageName","hasCommonJsDependencies","issuer","getIssuer","parentDependencies","mainIssuer","nextIssuer","warning","userRequest","addWarning","add","checkParentModules","getWebpackModule","split","join","dependency"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/@angular-devkit/build-angular/src/webpack/plugins/common-js-usage-warn-plugin.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CommonJsUsageWarnPlugin = void 0;\nconst path_1 = require(\"path\");\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\n// Webpack doesn't export these so the deep imports can potentially break.\nconst AMDDefineDependency = require('webpack/lib/dependencies/AMDDefineDependency');\nconst CommonJsExportsDependency = require('webpack/lib/dependencies/CommonJsExportsDependency');\nconst CommonJsRequireDependency = require('webpack/lib/dependencies/CommonJsRequireDependency');\nconst CommonJsSelfReferenceDependency = require('webpack/lib/dependencies/CommonJsSelfReferenceDependency');\nclass CommonJsUsageWarnPlugin {\n    constructor(options = {}) {\n        this.options = options;\n        this.shownWarnings = new Set();\n        this.allowedDependencies = new Set(this.options.allowedDependencies);\n    }\n    apply(compiler) {\n        compiler.hooks.compilation.tap('CommonJsUsageWarnPlugin', (compilation) => {\n            compilation.hooks.finishModules.tap('CommonJsUsageWarnPlugin', (modules) => {\n                var _a;\n                const mainEntry = compilation.entries.get('main');\n                if (!mainEntry) {\n                    return;\n                }\n                const mainModules = new Set(mainEntry.dependencies.map((dep) => compilation.moduleGraph.getModule(dep)));\n                for (const module of modules) {\n                    const { dependencies, rawRequest } = module;\n                    if (!rawRequest ||\n                        rawRequest.startsWith('.') ||\n                        (0, path_1.isAbsolute)(rawRequest) ||\n                        this.allowedDependencies.has(rawRequest) ||\n                        this.allowedDependencies.has(this.rawRequestToPackageName(rawRequest)) ||\n                        rawRequest.startsWith('@angular/common/locales/')) {\n                        /**\n                         * Skip when:\n                         * - module is absolute or relative.\n                         * - module is allowed even if it's a CommonJS.\n                         * - module is a locale imported from '@angular/common'.\n                         */\n                        continue;\n                    }\n                    if (this.hasCommonJsDependencies(compilation, dependencies)) {\n                        // Dependency is CommonsJS or AMD.\n                        const issuer = getIssuer(compilation, module);\n                        // Check if it's parent issuer is also a CommonJS dependency.\n                        // In case it is skip as an warning will be show for the parent CommonJS dependency.\n                        const parentDependencies = (_a = getIssuer(compilation, issuer)) === null || _a === void 0 ? void 0 : _a.dependencies;\n                        if (parentDependencies &&\n                            this.hasCommonJsDependencies(compilation, parentDependencies, true)) {\n                            continue;\n                        }\n                        // Find the main issuer (entry-point).\n                        let mainIssuer = issuer;\n                        let nextIssuer = getIssuer(compilation, mainIssuer);\n                        while (nextIssuer) {\n                            mainIssuer = nextIssuer;\n                            nextIssuer = getIssuer(compilation, mainIssuer);\n                        }\n                        // Only show warnings for modules from main entrypoint.\n                        // And if the issuer request is not from 'webpack-dev-server', as 'webpack-dev-server'\n                        // will require CommonJS libraries for live reloading such as 'sockjs-node'.\n                        if (mainIssuer && mainModules.has(mainIssuer)) {\n                            const warning = `${issuer === null || issuer === void 0 ? void 0 : issuer.userRequest} depends on '${rawRequest}'. ` +\n                                'CommonJS or AMD dependencies can cause optimization bailouts.\\n' +\n                                'For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies';\n                            // Avoid showing the same warning multiple times when in 'watch' mode.\n                            if (!this.shownWarnings.has(warning)) {\n                                (0, webpack_diagnostics_1.addWarning)(compilation, warning);\n                                this.shownWarnings.add(warning);\n                            }\n                        }\n                    }\n                }\n            });\n        });\n    }\n    hasCommonJsDependencies(compilation, dependencies, checkParentModules = false) {\n        for (const dep of dependencies) {\n            if (dep instanceof CommonJsRequireDependency ||\n                dep instanceof CommonJsExportsDependency ||\n                dep instanceof CommonJsSelfReferenceDependency ||\n                dep instanceof AMDDefineDependency) {\n                return true;\n            }\n            if (checkParentModules) {\n                const module = getWebpackModule(compilation, dep);\n                if (module && this.hasCommonJsDependencies(compilation, module.dependencies)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    rawRequestToPackageName(rawRequest) {\n        return rawRequest.startsWith('@')\n            ? // Scoped request ex: @angular/common/locale/en -> @angular/common\n                rawRequest.split('/', 2).join('/')\n            : // Non-scoped request ex: lodash/isEmpty -> lodash\n                rawRequest.split('/', 1)[0];\n    }\n}\nexports.CommonJsUsageWarnPlugin = CommonJsUsageWarnPlugin;\nfunction getIssuer(compilation, module) {\n    if (!module) {\n        return null;\n    }\n    return compilation.moduleGraph.getIssuer(module);\n}\nfunction getWebpackModule(compilation, dependency) {\n    if (!dependency) {\n        return null;\n    }\n    return compilation.moduleGraph.getModule(dependency);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}