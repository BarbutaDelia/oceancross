{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = void 0;\n\nconst dns_txt_1 = __importDefault(require(\"./dns-txt\"));\n\nconst dns_equal_1 = __importDefault(require(\"dns-equal\"));\n\nconst events_1 = require(\"events\");\n\nconst service_types_1 = require(\"./service-types\");\n\nconst filter_service_1 = __importDefault(require(\"./utils/filter-service\"));\n\nconst filter_txt_1 = __importDefault(require(\"./utils/filter-txt\"));\n\nconst TLD = '.local';\nconst WILDCARD = '_services._dns-sd._udp' + TLD;\n\nclass Browser extends events_1.EventEmitter {\n  constructor(mdns, opts, onup) {\n    super();\n    this.onresponse = null;\n    this.serviceMap = {};\n    this.wildcard = false;\n    this._services = [];\n    if (typeof opts === 'function') return new Browser(mdns, null, opts);\n    this.mdns = mdns;\n\n    if (opts != null && opts.txt != null) {\n      this.txt = new dns_txt_1.default(opts.txt);\n    } else {\n      this.txt = new dns_txt_1.default();\n    }\n\n    if (!opts || !opts.type) {\n      this.name = WILDCARD;\n      this.wildcard = true;\n    } else {\n      this.name = (0, service_types_1.toString)({\n        name: opts.type,\n        protocol: opts.protocol || 'tcp'\n      }) + TLD;\n      if (opts.name) this.name = opts.name + '.' + this.name;\n      this.wildcard = false;\n    }\n\n    if (opts != null && opts.txt !== undefined) this.txtQuery = (0, filter_txt_1.default)(opts.txt);\n    if (onup) this.on('up', onup);\n    this.start();\n  }\n\n  start() {\n    if (this.onresponse || this.name === undefined) return;\n    var self = this;\n    var nameMap = {};\n    if (!this.wildcard) nameMap[this.name] = true;\n\n    this.onresponse = (packet, rinfo) => {\n      if (self.wildcard) {\n        packet.answers.forEach(answer => {\n          if (answer.type !== 'PTR' || answer.name !== self.name || answer.name in nameMap) return;\n          nameMap[answer.data] = true;\n          self.mdns.query(answer.data, 'PTR');\n        });\n      }\n\n      Object.keys(nameMap).forEach(function (name) {\n        self.goodbyes(name, packet).forEach(self.removeService.bind(self));\n        var matches = self.buildServicesFor(name, packet, self.txt, rinfo);\n        if (matches.length === 0) return;\n        matches.forEach(service => {\n          if (self.serviceMap[service.fqdn]) return;\n          self.addService(service);\n        });\n      });\n    };\n\n    this.mdns.on('response', this.onresponse);\n    this.update();\n  }\n\n  stop() {\n    if (!this.onresponse) return;\n    this.mdns.removeListener('response', this.onresponse);\n    this.onresponse = null;\n  }\n\n  update() {\n    this.mdns.query(this.name, 'PTR');\n  }\n\n  get services() {\n    return this._services;\n  }\n\n  addService(service) {\n    if ((0, filter_service_1.default)(service, this.txtQuery) === false) return;\n\n    this._services.push(service);\n\n    this.serviceMap[service.fqdn] = true;\n    this.emit('up', service);\n  }\n\n  removeService(fqdn) {\n    var service, index;\n\n    this._services.some(function (s, i) {\n      if ((0, dns_equal_1.default)(s.fqdn, fqdn)) {\n        service = s;\n        index = i;\n        return true;\n      }\n    });\n\n    if (!service || index === undefined) return;\n\n    this._services.splice(index, 1);\n\n    delete this.serviceMap[fqdn];\n    this.emit('down', service);\n  }\n\n  goodbyes(name, packet) {\n    return packet.answers.concat(packet.additionals).filter(rr => rr.type === 'PTR' && rr.ttl === 0 && (0, dns_equal_1.default)(rr.name, name)).map(rr => rr.data);\n  }\n\n  buildServicesFor(name, packet, txt, referer) {\n    var records = packet.answers.concat(packet.additionals).filter(rr => rr.ttl > 0);\n    return records.filter(rr => rr.type === 'PTR' && (0, dns_equal_1.default)(rr.name, name)).map(ptr => {\n      const service = {\n        addresses: []\n      };\n      records.filter(rr => {\n        return (rr.type === 'SRV' || rr.type === 'TXT') && (0, dns_equal_1.default)(rr.name, ptr.data);\n      }).forEach(rr => {\n        if (rr.type === 'SRV') {\n          var parts = rr.name.split('.');\n          var name = parts[0];\n          var types = (0, service_types_1.toType)(parts.slice(1, -1).join('.'));\n          service.name = name;\n          service.fqdn = rr.name;\n          service.host = rr.data.target;\n          service.referer = referer;\n          service.port = rr.data.port;\n          service.type = types.name;\n          service.protocol = types.protocol;\n          service.subtypes = types.subtypes;\n        } else if (rr.type === 'TXT') {\n          service.rawTxt = rr.data;\n          service.txt = this.txt.decodeAll(rr.data);\n        }\n      });\n      if (!service.name) return;\n      records.filter(rr => (rr.type === 'A' || rr.type === 'AAAA') && (0, dns_equal_1.default)(rr.name, service.host)).forEach(rr => service.addresses.push(rr.data));\n      return service;\n    }).filter(rr => !!rr);\n  }\n\n}\n\nexports.Browser = Browser;\nexports.default = Browser;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Browser","dns_txt_1","require","dns_equal_1","events_1","service_types_1","filter_service_1","filter_txt_1","TLD","WILDCARD","EventEmitter","constructor","mdns","opts","onup","onresponse","serviceMap","wildcard","_services","txt","default","type","name","toString","protocol","undefined","txtQuery","on","start","self","nameMap","packet","rinfo","answers","forEach","answer","data","query","keys","goodbyes","removeService","bind","matches","buildServicesFor","length","service","fqdn","addService","update","stop","removeListener","services","push","emit","index","some","s","i","splice","concat","additionals","filter","rr","ttl","map","referer","records","ptr","addresses","parts","split","types","toType","slice","join","host","target","port","subtypes","rawTxt","decodeAll"],"sources":["/Users/deliabarbuta/Documents/An4Sem1/PAW/Proiect/proiect-paw-tadam/Frontend_OceanCross/node_modules/bonjour-service/dist/lib/browser.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Browser = void 0;\nconst dns_txt_1 = __importDefault(require(\"./dns-txt\"));\nconst dns_equal_1 = __importDefault(require(\"dns-equal\"));\nconst events_1 = require(\"events\");\nconst service_types_1 = require(\"./service-types\");\nconst filter_service_1 = __importDefault(require(\"./utils/filter-service\"));\nconst filter_txt_1 = __importDefault(require(\"./utils/filter-txt\"));\nconst TLD = '.local';\nconst WILDCARD = '_services._dns-sd._udp' + TLD;\nclass Browser extends events_1.EventEmitter {\n    constructor(mdns, opts, onup) {\n        super();\n        this.onresponse = null;\n        this.serviceMap = {};\n        this.wildcard = false;\n        this._services = [];\n        if (typeof opts === 'function')\n            return new Browser(mdns, null, opts);\n        this.mdns = mdns;\n        if (opts != null && opts.txt != null) {\n            this.txt = new dns_txt_1.default(opts.txt);\n        }\n        else {\n            this.txt = new dns_txt_1.default();\n        }\n        if (!opts || !opts.type) {\n            this.name = WILDCARD;\n            this.wildcard = true;\n        }\n        else {\n            this.name = (0, service_types_1.toString)({ name: opts.type, protocol: opts.protocol || 'tcp' }) + TLD;\n            if (opts.name)\n                this.name = opts.name + '.' + this.name;\n            this.wildcard = false;\n        }\n        if (opts != null && opts.txt !== undefined)\n            this.txtQuery = (0, filter_txt_1.default)(opts.txt);\n        if (onup)\n            this.on('up', onup);\n        this.start();\n    }\n    start() {\n        if (this.onresponse || this.name === undefined)\n            return;\n        var self = this;\n        var nameMap = {};\n        if (!this.wildcard)\n            nameMap[this.name] = true;\n        this.onresponse = (packet, rinfo) => {\n            if (self.wildcard) {\n                packet.answers.forEach((answer) => {\n                    if (answer.type !== 'PTR' || answer.name !== self.name || answer.name in nameMap)\n                        return;\n                    nameMap[answer.data] = true;\n                    self.mdns.query(answer.data, 'PTR');\n                });\n            }\n            Object.keys(nameMap).forEach(function (name) {\n                self.goodbyes(name, packet).forEach(self.removeService.bind(self));\n                var matches = self.buildServicesFor(name, packet, self.txt, rinfo);\n                if (matches.length === 0)\n                    return;\n                matches.forEach((service) => {\n                    if (self.serviceMap[service.fqdn])\n                        return;\n                    self.addService(service);\n                });\n            });\n        };\n        this.mdns.on('response', this.onresponse);\n        this.update();\n    }\n    stop() {\n        if (!this.onresponse)\n            return;\n        this.mdns.removeListener('response', this.onresponse);\n        this.onresponse = null;\n    }\n    update() {\n        this.mdns.query(this.name, 'PTR');\n    }\n    get services() {\n        return this._services;\n    }\n    addService(service) {\n        if ((0, filter_service_1.default)(service, this.txtQuery) === false)\n            return;\n        this._services.push(service);\n        this.serviceMap[service.fqdn] = true;\n        this.emit('up', service);\n    }\n    removeService(fqdn) {\n        var service, index;\n        this._services.some(function (s, i) {\n            if ((0, dns_equal_1.default)(s.fqdn, fqdn)) {\n                service = s;\n                index = i;\n                return true;\n            }\n        });\n        if (!service || index === undefined)\n            return;\n        this._services.splice(index, 1);\n        delete this.serviceMap[fqdn];\n        this.emit('down', service);\n    }\n    goodbyes(name, packet) {\n        return packet.answers.concat(packet.additionals)\n            .filter((rr) => rr.type === 'PTR' && rr.ttl === 0 && (0, dns_equal_1.default)(rr.name, name))\n            .map((rr) => rr.data);\n    }\n    buildServicesFor(name, packet, txt, referer) {\n        var records = packet.answers.concat(packet.additionals).filter((rr) => rr.ttl > 0);\n        return records\n            .filter((rr) => rr.type === 'PTR' && (0, dns_equal_1.default)(rr.name, name))\n            .map((ptr) => {\n            const service = {\n                addresses: []\n            };\n            records\n                .filter((rr) => {\n                return (rr.type === 'SRV' || rr.type === 'TXT') && (0, dns_equal_1.default)(rr.name, ptr.data);\n            })\n                .forEach((rr) => {\n                if (rr.type === 'SRV') {\n                    var parts = rr.name.split('.');\n                    var name = parts[0];\n                    var types = (0, service_types_1.toType)(parts.slice(1, -1).join('.'));\n                    service.name = name;\n                    service.fqdn = rr.name;\n                    service.host = rr.data.target;\n                    service.referer = referer;\n                    service.port = rr.data.port;\n                    service.type = types.name;\n                    service.protocol = types.protocol;\n                    service.subtypes = types.subtypes;\n                }\n                else if (rr.type === 'TXT') {\n                    service.rawTxt = rr.data;\n                    service.txt = this.txt.decodeAll(rr.data);\n                }\n            });\n            if (!service.name)\n                return;\n            records\n                .filter((rr) => (rr.type === 'A' || rr.type === 'AAAA') && (0, dns_equal_1.default)(rr.name, service.host))\n                .forEach((rr) => service.addresses.push(rr.data));\n            return service;\n        })\n            .filter((rr) => !!rr);\n    }\n}\nexports.Browser = Browser;\nexports.default = Browser;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}